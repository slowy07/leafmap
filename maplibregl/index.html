
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python package for interactive mapping and geospatial analysis with minimal coding in a Jupyter environment">
      
      
        <meta name="author" content="Qiusheng Wu">
      
      
        <link rel="canonical" href="https://leafmap.org/maplibregl/">
      
      
        <link rel="prev" href="../kepler/">
      
      
        <link rel="next" href="../leafmap/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>maplibregl module - leafmap</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRegular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-B1C88N45QG"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-B1C88N45QG",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-B1C88N45QG",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#maplibregl-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="leafmap" class="md-header__button md-logo" aria-label="leafmap" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            leafmap
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              maplibregl module
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/opengeos/leafmap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="leafmap" class="md-nav__button md-logo" aria-label="leafmap" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    leafmap
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opengeos/leafmap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://book.leafmap.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Book
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_key_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://huggingface.co/spaces/giswqs/solara-geospatial" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web App
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://youtube.com/@giswqs" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YouTube Channel
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/opengeos/leafmap/issues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" checked>
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basemaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    basemaps module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bokehmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bokehmap module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../colormaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    colormaps module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deck module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deckgl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deckgl module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    examples module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../foliumap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    foliumap module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kepler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kepler module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    maplibregl module
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    maplibregl module
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl" class="md-nav__link">
    <span class="md-ellipsis">
      leafmap.maplibregl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map" class="md-nav__link">
    <span class="md-ellipsis">
      Map
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_3d_buildings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_arc_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_arc_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_cog_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_cog_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_deck_layers" class="md-nav__link">
    <span class="md-ellipsis">
      add_deck_layers()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_ee_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      add_geojson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      add_gps_trace()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_html" class="md-nav__link">
    <span class="md-ellipsis">
      add_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_image" class="md-nav__link">
    <span class="md-ellipsis">
      add_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_marker" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_nlcd" class="md-nav__link">
    <span class="md-ellipsis">
      add_nlcd()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_3d_buildings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_buildings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_pmtiles" class="md-nav__link">
    <span class="md-ellipsis">
      add_pmtiles()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_raster" class="md-nav__link">
    <span class="md-ellipsis">
      add_raster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_source" class="md-nav__link">
    <span class="md-ellipsis">
      add_source()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_stac_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      add_symbol()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_tile_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_video" class="md-nav__link">
    <span class="md-ellipsis">
      add_video()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_wms_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_wms_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_first_symbol_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_first_symbol_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_style_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_style_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fit_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      fit_bounds()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fly_to" class="md-nav__link">
    <span class="md-ellipsis">
      fly_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style" class="md-nav__link">
    <span class="md-ellipsis">
      get_style()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style_layers" class="md-nav__link">
    <span class="md-ellipsis">
      get_style_layers()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.jump_to" class="md-nav__link">
    <span class="md-ellipsis">
      jump_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      layer_interact()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.open_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      open_geojson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.pan_to" class="md-nav__link">
    <span class="md-ellipsis">
      pan_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_layer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.rotate_to" class="md-nav__link">
    <span class="md-ellipsis">
      rotate_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.save_draw_features" class="md-nav__link">
    <span class="md-ellipsis">
      save_draw_features()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_center" class="md-nav__link">
    <span class="md-ellipsis">
      set_center()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_color" class="md-nav__link">
    <span class="md-ellipsis">
      set_color()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_layout_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_layout_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_opacity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_paint_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_paint_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_pitch" class="md-nav__link">
    <span class="md-ellipsis">
      set_pitch()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_visibility()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_zoom" class="md-nav__link">
    <span class="md-ellipsis">
      set_zoom()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.show" class="md-nav__link">
    <span class="md-ellipsis">
      show()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.style_layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      style_layer_interact()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_html" class="md-nav__link">
    <span class="md-ellipsis">
      to_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_streamlit" class="md-nav__link">
    <span class="md-ellipsis">
      to_streamlit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.zoom_to" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.construct_maptiler_style" class="md-nav__link">
    <span class="md-ellipsis">
      construct_maptiler_style()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.edit_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      edit_gps_trace()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.maptiler_3d_style" class="md-nav__link">
    <span class="md-ellipsis">
      maptiler_3d_style()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../leafmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    leafmap module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../legends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    legends module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../map_widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map_widgets module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../osm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    osm module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pc module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plot module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plotlymap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plotlymap module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deck module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stac module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    toolbar module
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Workshops
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Workshops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/FOSS4G_2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FOSS4G 2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SIGSPATIAL_2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SIGSPATIAL 2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/YouthMappers_2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YouthMappers 2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/ICRW_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ICRW 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/EarthCube_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EarthCube 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Taiwan_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Taiwan 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/HGAC_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HGAC 2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MapLibre
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            MapLibre
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_buildings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3d buildings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_choropleth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3d choropleth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_indoor_mapping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3d indoor mapping
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_pmtiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3d pmtiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3d style
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_terrain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3d terrain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_3d_buildings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add 3d buildings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_a_marker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add a marker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_colorbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add colorbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_deckgl_layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add deckgl layer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_gif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add gif
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_html/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add html
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_icon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add icon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_image_generated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add image generated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_legend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_logo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add logo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_text/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_a_line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Animate a line
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_camera_around_point/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Animate camera around point
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_images/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Animate images
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_point_along_line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Animate point along line
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_point_along_route/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Animate point along route
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/attribution_position/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attribution position
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/basemaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basemaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/center_on_symbol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Center on symbol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/change_building_color/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Change building color
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/change_case_of_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Change case of labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/cloud_optimized_geotiff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud optimized geotiff
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/color_switcher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Color switcher
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/countries_filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Countries filter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/custom_marker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom marker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/data_driven_lines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data driven lines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/disable_scroll_zoom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disable scroll zoom
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/display_rich_text/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Display rich text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/drag_a_marker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drag a marker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/draw_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Draw features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fallback_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fallback image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fields_of_the_world/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields of the world
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fit_bounds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fit bounds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fill_pattern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fill pattern
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fly_to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fly to
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fly_to_options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fly to options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fullscreen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fullscreen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_layer_in_stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geojson layer in stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geojson line
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_points/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geojson points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_polygon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geojson polygon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geopandas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geopandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/google_earth_engine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google earth engine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/gps_trace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gps trace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/heatmap_layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Heatmap layer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/interactive_false/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive false
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/jump_to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jump to
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/language_switch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language switch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/layer_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Layer control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/line_gradient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Line gradient
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/live_geojson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live geojson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/live_update_feature/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live update feature
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/local_geojson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local geojson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/local_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/locate_user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Locate user
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/map_tiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map tiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/maptiler_styles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maptiler styles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/mouse_position/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mouse position
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/multiple_geometries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple geometries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/navigation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Navigation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/ocean_bathymetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ocean bathymetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/openfreemap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Openfreemap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/openstreetmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Openstreetmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/overture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/pmtiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pmtiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/restrict_bounds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Restrict bounds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/satellite_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Satellite map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/set_pitch_bearing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set pitch bearing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/stac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/to_html/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    To html
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/variable_label_placement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variable label placement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/variable_offset_label_placement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variable offset label placement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/vector_tile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vector tile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/video_on_a_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video on a map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/visualize_population_density/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualize population density
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/wms_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wms source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/zoom_to_linestring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zoom to linestring
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Notebooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_key_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/01_leafmap_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01 leafmap intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/02_using_basemaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 using basemaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/03_cog_stac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 cog stac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/04_cog_mosaic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 cog mosaic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/05_load_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 load raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/06_legend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/07_colorbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 colorbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/08_whitebox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 whitebox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/09_csv_to_points/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 csv to points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/10_add_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10 add vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/11_linked_maps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11 linked maps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/12_split_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12 split map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/13_geopandas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13 geopandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/14_postgis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14 postgis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/15_openstreetmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15 openstreetmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/16_heremap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16 heremap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/17_vector_tile_layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17 vector tile layer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/18_point_layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18 point layer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/19_map_to_html/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19 map to html
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/20_planet_imagery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20 planet imagery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/21_ts_inspector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21 ts inspector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/22_time_slider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22 time slider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/23_colormaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23 colormaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/24_heatmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24 heatmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/25_map_title/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25 map title
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/26_kepler_gl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26 kepler gl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/27_basemap_gallery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    27 basemap gallery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/28_publish_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    28 publish map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/29_pydeck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    29 pydeck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/30_census_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    30 census data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/31_search_basemaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    31 search basemaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/32_local_tile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    32 local tile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/33_image_overlay/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    33 image overlay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/34_add_points_from_xy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    34 add points from xy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/35_circle_markers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    35 circle markers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/36_add_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    36 add labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/37_planetary_computer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    37 planetary computer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/38_plotly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    38 plotly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/39_inspector_tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    39 inspector tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/40_plotly_gui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    40 plotly gui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/41_raster_gui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    41 raster gui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/42_create_cog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    42 create cog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/43_search_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    43 search control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/44_attribute_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    44 attribute table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/45_create_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    45 create vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/46_edit_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    46 edit vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/47_numpy_to_cog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    47 numpy to cog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/48_lidar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    48 lidar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/49_split_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    49 split control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/50_marker_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    50 marker cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/51_clip_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    51 clip image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/52_netcdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    52 netcdf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/53_choropleth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    53 choropleth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/54_plot_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    54 plot raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/55_lidar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    55 lidar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/56_download_ned/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    56 download ned
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/57_national_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    57 national map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/58_bokeh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    58 bokeh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/59_create_legend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    59 create legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/60_add_widget/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    60 add widget
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/61_vector_to_gif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    61 vector to gif
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/62_folium_colorbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    62 folium colorbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/63_arcgis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    63 arcgis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/64_stac_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    64 stac search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/65_sagemaker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    65 sagemaker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/66_gradio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    66 gradio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/67_maxar_open_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    67 maxar open data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/68_openaerialmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    68 openaerialmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/69_turkey_earthquake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    69 turkey earthquake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/70_zonal_stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    70 zonal stats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/71_aws_s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    71 aws s3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/72_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    72 timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/73_custom_stac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    73 custom stac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/74_map_tiles_to_geotiff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    74 map tiles to geotiff
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/75_segment_anything/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    75 segment anything
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/76_image_comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    76 image comparison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/77_split_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    77 split raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/78_read_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    78 read raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/79_timeseries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    79 timeseries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/80_solar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    80 solar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/81_buildings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    81 buildings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/82_pmtiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    82 pmtiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/83_vector_viz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    83 vector viz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/84_read_parquet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    84 read parquet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/85_gedi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    85 gedi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/86_add_markers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    86 add markers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/87_actinia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    87 actinia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/88_nasa_earth_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    88 nasa earth data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/89_image_array_viz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    89 image array viz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/90_pixel_inspector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    90 pixel inspector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/91_raster_viz_gui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    91 raster viz gui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/92_maplibre/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    92 maplibre
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/93_maplibre_pmtiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    93 maplibre pmtiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/94_mapbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    94 mapbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/95_edit_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    95 edit vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/96_batch_edit_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    96 batch edit vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/97_overture_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    97 overture data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/98_watershed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    98 watershed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/99_wetlands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    99 wetlands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/100_nlcd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    100 nlcd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl" class="md-nav__link">
    <span class="md-ellipsis">
      leafmap.maplibregl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map" class="md-nav__link">
    <span class="md-ellipsis">
      Map
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_3d_buildings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_arc_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_arc_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_cog_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_cog_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_deck_layers" class="md-nav__link">
    <span class="md-ellipsis">
      add_deck_layers()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_ee_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      add_geojson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      add_gps_trace()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_html" class="md-nav__link">
    <span class="md-ellipsis">
      add_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_image" class="md-nav__link">
    <span class="md-ellipsis">
      add_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_marker" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_nlcd" class="md-nav__link">
    <span class="md-ellipsis">
      add_nlcd()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_3d_buildings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_buildings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_pmtiles" class="md-nav__link">
    <span class="md-ellipsis">
      add_pmtiles()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_raster" class="md-nav__link">
    <span class="md-ellipsis">
      add_raster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_source" class="md-nav__link">
    <span class="md-ellipsis">
      add_source()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_stac_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      add_symbol()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_tile_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_video" class="md-nav__link">
    <span class="md-ellipsis">
      add_video()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_wms_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_wms_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_first_symbol_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_first_symbol_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_style_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_style_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fit_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      fit_bounds()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fly_to" class="md-nav__link">
    <span class="md-ellipsis">
      fly_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style" class="md-nav__link">
    <span class="md-ellipsis">
      get_style()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style_layers" class="md-nav__link">
    <span class="md-ellipsis">
      get_style_layers()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.jump_to" class="md-nav__link">
    <span class="md-ellipsis">
      jump_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      layer_interact()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.open_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      open_geojson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.pan_to" class="md-nav__link">
    <span class="md-ellipsis">
      pan_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_layer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.rotate_to" class="md-nav__link">
    <span class="md-ellipsis">
      rotate_to()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.save_draw_features" class="md-nav__link">
    <span class="md-ellipsis">
      save_draw_features()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_center" class="md-nav__link">
    <span class="md-ellipsis">
      set_center()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_color" class="md-nav__link">
    <span class="md-ellipsis">
      set_color()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_layout_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_layout_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_opacity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_paint_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_paint_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_pitch" class="md-nav__link">
    <span class="md-ellipsis">
      set_pitch()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_visibility()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_zoom" class="md-nav__link">
    <span class="md-ellipsis">
      set_zoom()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.show" class="md-nav__link">
    <span class="md-ellipsis">
      show()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.style_layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      style_layer_interact()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_html" class="md-nav__link">
    <span class="md-ellipsis">
      to_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_streamlit" class="md-nav__link">
    <span class="md-ellipsis">
      to_streamlit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.zoom_to" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.construct_maptiler_style" class="md-nav__link">
    <span class="md-ellipsis">
      construct_maptiler_style()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.edit_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      edit_gps_trace()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.maptiler_3d_style" class="md-nav__link">
    <span class="md-ellipsis">
      maptiler_3d_style()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
  


<h1 id="maplibregl-module">maplibregl module<a class="headerlink" href="#maplibregl-module" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">

<a id="leafmap.maplibregl"></a>
    <div class="doc doc-contents first">

      <p>The maplibregl module provides the Map class for creating interactive maps using the maplibre.ipywidget module.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.Map" class="doc doc-heading">
        <code>
Map            (<span title="maplibre.ipywidget.MapWidget">MapWidget</span>)
        </code>



<a href="#leafmap.maplibregl.Map" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>The Map class inherits from the MapWidget class of the maplibre.ipywidget module.</p>

        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span><span class="n">MapWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Map class inherits from the MapWidget class of the maplibre.ipywidget module.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">center</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
        <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;navigation&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Map object.</span>

<span class="sd">        Args:</span>
<span class="sd">            center (tuple, optional): The center of the map (lon, lat). Defaults</span>
<span class="sd">                to (0, 20).</span>
<span class="sd">            zoom (float, optional): The zoom level of the map. Defaults to 1.</span>
<span class="sd">            pitch (float, optional): The pitch of the map. Measured in degrees</span>
<span class="sd">                away from the plane of the screen (0-85) Defaults to 0.</span>
<span class="sd">            bearing (float, optional): The bearing of the map. Measured in degrees</span>
<span class="sd">                counter-clockwise from north. Defaults to 0.</span>
<span class="sd">            style (str, optional): The style of the map. It can be a string or a URL.</span>
<span class="sd">                If it is a string, it must be one of the following: &quot;dark-matter&quot;, &quot;positron&quot;,</span>
<span class="sd">                &quot;carto-positron&quot;, &quot;voyager&quot;, &quot;positron-nolabels&quot;, &quot;dark-matter-nolabels&quot;,</span>
<span class="sd">                &quot;voyager-nolabels&quot;, &quot;demotiles&quot;, &quot;liberty&quot;, &quot;bright&quot;, or &quot;positron2&quot;.</span>
<span class="sd">                If a MapTiler API key is set, you can also use any of the MapTiler styles,</span>
<span class="sd">                such as aquarelle, backdrop, basic, bright, dataviz, landscape, ocean,</span>
<span class="sd">                openstreetmap, outdoor, satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">                If it is a URL, it must point to a MapLibre style JSON. Defaults to &quot;dark-matter&quot;.</span>
<span class="sd">            height (str, optional): The height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">            controls (dict, optional): The controls and their positions on the</span>
<span class="sd">                map. Defaults to {&quot;fullscreen&quot;: &quot;top-right&quot;, &quot;scale&quot;: &quot;bottom-left&quot;}.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the MapOptions class.</span>
<span class="sd">                See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/</span>
<span class="sd">                for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">carto_basemaps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
            <span class="s2">&quot;positron&quot;</span><span class="p">,</span>
            <span class="s2">&quot;voyager&quot;</span><span class="p">,</span>
            <span class="s2">&quot;positron-nolabels&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dark-matter-nolabels&quot;</span><span class="p">,</span>
            <span class="s2">&quot;voyager-nolabels&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">openfreemap_basemaps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;liberty&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bright&quot;</span><span class="p">,</span>
            <span class="s2">&quot;positron2&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https&quot;</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;The provided style URL is invalid. Falling back to &#39;dark-matter&#39;.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span>
            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">):</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">maptiler_3d_style</span><span class="p">(</span>
                    <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="n">exaggeration</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;exaggeration&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">tile_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tile_size&quot;</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span>
                    <span class="n">hillshade</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hillshade&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">openfreemap_basemaps</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;positron2&quot;</span><span class="p">:</span>
                    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;positron&quot;</span>
                <span class="n">style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tiles.openfreemap.org/styles/</span><span class="si">{</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;demotiles&quot;</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;https://demotiles.maplibre.org/style.json&quot;</span>
            <span class="k">elif</span> <span class="s2">&quot;background-&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">background</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">map_options</span> <span class="o">=</span> <span class="n">MapOptions</span><span class="p">(</span>
            <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="n">pitch</span><span class="p">,</span> <span class="n">bearing</span><span class="o">=</span><span class="n">bearing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">map_options</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">use_message_queue</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">control</span><span class="p">,</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">controls</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">BACKGROUND</span><span class="p">),</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays the map.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Container</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays the map.&quot;&quot;&quot;</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MAPLIBRE_OUTPUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">replace_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MAPTILER_REPLACE_KEY&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">replace_key</span><span class="o">=</span><span class="n">replace_key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer</span><span class="p">:</span> <span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a layer to the map.</span>

<span class="sd">        This method adds a layer to the map. If a name is provided, it is used</span>
<span class="sd">            as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">            the layer&#39;s ID is used as the key. If a before_id is provided, the</span>
<span class="sd">            layer is inserted before the layer with that ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer (Layer): The layer object to add to the map.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            name (str, optional): The name to use as the key to store the layer</span>
<span class="sd">                in the layer dictionary. If None, the layer&#39;s ID is used as the key.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible by default.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;minzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;min-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;minzoom&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;maxzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;max-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_top_level_hyphens</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">layer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">paint</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">visible</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a layer from the map.</span>

<span class="sd">        This method removes a layer from the map using the layer&#39;s name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer to remove.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeLayer&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">tooltip</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Deck.GL layers to the layer stack</span>

<span class="sd">        Args:</span>
<span class="sd">            layers (list[dict]): A list of dictionaries containing the Deck.GL layers to be added.</span>
<span class="sd">            tooltip (str | dict): Either a single mustache template string applied to all layers</span>
<span class="sd">                or a dictionary where keys are layer ids and values are mustache template strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
                <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@@type&quot;</span><span class="p">,</span> <span class="s2">&quot;deck&quot;</span><span class="p">),</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;getFillColor&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">),</span>
            <span class="p">}</span>

    <span class="k">def</span> <span class="nf">add_arc_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
        <span class="n">src_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">src_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">dst_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">dst_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">src_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="n">dst_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="n">line_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;arc_layer&quot;</span><span class="p">,</span>
        <span class="n">pickable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a DeckGL ArcLayer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (Union[str, pd.DataFrame]): The file path or DataFrame containing the data.</span>
<span class="sd">            src_lon (str): The source longitude column name.</span>
<span class="sd">            src_lat (str): The source latitude column name.</span>
<span class="sd">            dst_lon (str): The destination longitude column name.</span>
<span class="sd">            dst_lat (str): The destination latitude column name.</span>
<span class="sd">            src_color (List[int]): The source color as an RGB list.</span>
<span class="sd">            dst_color (List[int]): The destination color as an RGB list.</span>
<span class="sd">            line_width (int): The width of the lines.</span>
<span class="sd">            layer_id (str): The ID of the layer.</span>
<span class="sd">            pickable (bool): Whether the layer is pickable.</span>
<span class="sd">            tooltip (Optional[Union[str, List[str]]], optional): The tooltip content or list of columns. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional arguments for the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>

        <span class="n">arc_data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;source_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">src_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">src_lat</span><span class="p">]],</span>
                <span class="s2">&quot;target_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">dst_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">dst_lat</span><span class="p">]],</span>
                <span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>  <span class="c1"># Include other columns</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="c1"># Generate tooltip template dynamically based on the columns</span>
        <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tooltip</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="n">tooltip</span>
        <span class="n">tooltip_content</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">: </span><span class="se">{{{{</span><span class="s2"> </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> </span><span class="se">}}}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">])</span>

        <span class="n">deck_arc_layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;@@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ArcLayer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">arc_data</span><span class="p">,</span>
            <span class="s2">&quot;getSourcePosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=source_position&quot;</span><span class="p">,</span>
            <span class="s2">&quot;getTargetPosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=target_position&quot;</span><span class="p">,</span>
            <span class="s2">&quot;getSourceColor&quot;</span><span class="p">:</span> <span class="n">src_color</span><span class="p">,</span>
            <span class="s2">&quot;getTargetColor&quot;</span><span class="p">:</span> <span class="n">dst_color</span><span class="p">,</span>
            <span class="s2">&quot;getWidth&quot;</span><span class="p">:</span> <span class="n">line_width</span><span class="p">,</span>
            <span class="s2">&quot;pickable&quot;</span><span class="p">:</span> <span class="n">pickable</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">deck_arc_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span>
            <span class="p">[</span><span class="n">deck_arc_layer</span><span class="p">],</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="p">{</span>
                <span class="n">layer_id</span><span class="p">:</span> <span class="n">tooltip_content</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a control to the map.</span>

<span class="sd">        This method adds a control to the map. The control can be one of the</span>
<span class="sd">            following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;,</span>
<span class="sd">            and &quot;draw&quot;. If the control is a string, it is converted to the</span>
<span class="sd">            corresponding control object. If the control is not a string, it is</span>
<span class="sd">            assumed to be a control object.</span>

<span class="sd">        Args:</span>
<span class="sd">            control (str or object): The control to add to the map. Can be one</span>
<span class="sd">                of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;,</span>
<span class="sd">                 &quot;attribution&quot;, and &quot;draw&quot;.</span>
<span class="sd">            position (str, optional): The position of the control. Defaults to &quot;top-right&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the control object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the control is a string and is not one of the</span>
<span class="sd">                following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">ScaleControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">FullscreenControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;geolocate&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">GeolocateControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;navigation&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">NavigationControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;attribution&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">AttributionControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;draw&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;layers&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Control can only be one of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, and &#39;draw&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_draw_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
        <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a drawing control to the map.</span>

<span class="sd">        This method enables users to add interactive drawing controls to the map,</span>
<span class="sd">        allowing for the creation, editing, and deletion of geometric shapes on</span>
<span class="sd">        the map. The options, position, and initial GeoJSON can be customized.</span>

<span class="sd">        Args:</span>
<span class="sd">            options (Optional[Dict[str, Any]]): Configuration options for the</span>
<span class="sd">                drawing control. Defaults to None.</span>
<span class="sd">            controls (Optional[Dict[str, Any]]): The drawing controls to enable.</span>
<span class="sd">                Can be one or more of the following: &#39;polygon&#39;, &#39;line_string&#39;,</span>
<span class="sd">                &#39;point&#39;, &#39;trash&#39;, &#39;combine_features&#39;, &#39;uncombine_features&#39;.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            position (str): The position of the control on the map. Defaults</span>
<span class="sd">                to &quot;top-left&quot;.</span>
<span class="sd">            geojson (Optional[Dict[str, Any]]): Initial GeoJSON data to load</span>
<span class="sd">                into the drawing control. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to be passed to the</span>
<span class="sd">                drawing control.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">maplibre.plugins</span> <span class="kn">import</span> <span class="n">MapboxDrawControls</span><span class="p">,</span> <span class="n">MapboxDrawOptions</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;polygon&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;line_string&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;line_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;trash&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;trash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;combine_features&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;combine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;uncombine_features&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;uncombine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">options</span> <span class="o">=</span> <span class="n">MapboxDrawOptions</span><span class="p">(</span>
                <span class="n">display_controls_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">controls</span><span class="o">=</span><span class="n">MapboxDrawControls</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_mapbox_draw</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_draw_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the drawn features to a file.</span>

<span class="sd">        This method saves all features created with the drawing control to a</span>
<span class="sd">        specified file in GeoJSON format. If there are no features to save, the</span>
<span class="sd">        file will not be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath (str): The path to the file where the GeoJSON data will be saved.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to be passed to json.dump for custom serialization.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the feature collection is empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">json</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are no features to save.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a source to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the source.</span>
<span class="sd">            source (str or dict): The source data. .</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>

    <span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the center of the map.</span>

<span class="sd">        This method sets the center of the map to the specified longitude and latitude.</span>
<span class="sd">        If a zoom level is provided, it also sets the zoom level of the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            lon (float): The longitude of the center of the map.</span>
<span class="sd">            lat (float): The latitude of the center of the map.</span>
<span class="sd">            zoom (int, optional): The zoom level of the map. If None, the zoom</span>
<span class="sd">                level is not changed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setCenter&quot;</span><span class="p">,</span> <span class="n">center</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the zoom level of the map.</span>

<span class="sd">        This method sets the zoom level of the map to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            zoom (int): The zoom level of the map.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fit_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjusts the viewport of the map to fit the specified geographical bounds</span>
<span class="sd">            in the format of [[lon_min, lat_min], [lon_max, lat_max]] or</span>
<span class="sd">            [lon_min, lat_min, lon_max, lat_max].</span>

<span class="sd">        This method adjusts the viewport of the map so that the specified geographical bounds</span>
<span class="sd">        are visible in the viewport. The bounds are specified as a list of two points,</span>
<span class="sd">        where each point is a list of two numbers representing the longitude and latitude.</span>

<span class="sd">        Args:</span>
<span class="sd">            bounds (list): A list of two points representing the geographical bounds that</span>
<span class="sd">                        should be visible in the viewport. Each point is a list of two</span>
<span class="sd">                        numbers representing the longitude and latitude. For example,</span>
<span class="sd">                        [[32.958984, -5.353521],[43.50585, 5.615985]]</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bounds</span><span class="p">):</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;fitBounds&quot;</span><span class="p">,</span> <span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">basemap</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a basemap to the map.</span>

<span class="sd">        This method adds a basemap to the map. The basemap can be a string from</span>
<span class="sd">        predefined basemaps, an instance of xyzservices.TileProvider, or a key</span>
<span class="sd">        from the basemaps dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            basemap (str or TileProvider, optional): The basemap to add. Can be</span>
<span class="sd">                one of the predefined strings, an instance of xyzservices.TileProvider,</span>
<span class="sd">                or a key from the basemaps dictionary. Defaults to None, which adds</span>
<span class="sd">                the basemap widget.</span>
<span class="sd">            opacity (float, optional): The opacity of the basemap. Defaults to 1.0.</span>
<span class="sd">            visible (bool, optional): Whether the basemap is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            attribution (str, optional): The attribution text to display for the</span>
<span class="sd">                basemap. If None, the attribution text is taken from the basemap</span>
<span class="sd">                or the TileProvider. Defaults to None.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">                RasterTileSource class. See https://bit.ly/4erD2MQ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the basemap is not one of the predefined strings,</span>
<span class="sd">                not an instance of TileProvider, and not a key from the basemaps dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">basemap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basemap_widget</span><span class="p">()</span>

        <span class="n">map_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;ROADMAP&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Maps&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SATELLITE&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TERRAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Terrain&quot;</span><span class="p">,</span>
            <span class="s2">&quot;HYBRID&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Hybrid&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span>
        <span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">max_zoom</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="n">min_zoom</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">map_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_google_map</span><span class="p">(</span><span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">url</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">attribution</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">name</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">attribution</span>
            <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>

        <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
                <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
                <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="p">],</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">max_zoom</span><span class="o">=</span><span class="n">max_zoom</span><span class="p">,</span>
            <span class="n">min_zoom</span><span class="o">=</span><span class="n">min_zoom</span><span class="p">,</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">raster_source</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GeoJSON layer to the map.</span>

<span class="sd">        This method adds a GeoJSON layer to the map. The GeoJSON data can be a</span>
<span class="sd">        URL to a GeoJSON file or a GeoJSON dictionary. If a name is provided, it</span>
<span class="sd">        is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">        a random name is generated.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | dict): The GeoJSON data. This can be a URL to a GeoJSON</span>
<span class="sd">                file or a GeoJSON dictionary.</span>
<span class="sd">            layer_type (str, optional): The type of the layer. It can be one of</span>
<span class="sd">                the following: &#39;circle&#39;, &#39;fill&#39;, &#39;fill-extrusion&#39;, &#39;line&#39;, &#39;symbol&#39;,</span>
<span class="sd">                &#39;raster&#39;, &#39;background&#39;, &#39;heatmap&#39;, &#39;hillshade&#39;. If None, the type</span>
<span class="sd">                is inferred from the GeoJSON data.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://maplibre.org/maplibre-style-spec/layers/ for more info.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">geom_type</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>

            <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="s2">&quot;geojson&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;geojson_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;features&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPoint&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">}</span>
            <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;LineString&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="p">}</span>

        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">paint</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fit_bounds</span> <span class="ow">and</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paint</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span> <span class="ow">in</span> <span class="n">paint</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a vector layer to the map.</span>

<span class="sd">        This method adds a vector layer to the map. The vector data can be a</span>
<span class="sd">        URL or local file path to a vector file. If a name is provided, it</span>
<span class="sd">        is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">        a random name is generated.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | dict): The vector data. This can be a URL or local file</span>
<span class="sd">                path to a vector file.</span>
<span class="sd">            layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">                is inferred from the GeoJSON data.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
            <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_gdf</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gdf</span><span class="p">:</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a vector layer to the map.</span>

<span class="sd">        This method adds a GeoDataFrame to the map as a vector layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf (gpd.GeoDataFrame): The GeoDataFrame to add to the map.</span>
<span class="sd">            layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">                is inferred from the GeoJSON data.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a GeoDataFrame.&quot;</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
            <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Tile Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a TileLayer to the map.</span>

<span class="sd">        This method adds a TileLayer to the map. The TileLayer is created from</span>
<span class="sd">            the specified URL, and it is added to the map with the specified</span>
<span class="sd">            name, attribution, visibility, and tile size.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the tile layer.</span>
<span class="sd">            name (str, optional): The name to use for the layer. Defaults to &#39;</span>
<span class="sd">                Tile Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">                default. Defaults to True.</span>
<span class="sd">            tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">                Defaults to 256.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the RasterTileSource class.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()],</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
            <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">raster_source</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">layers</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;WMS Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a WMS layer to the map.</span>

<span class="sd">        This method adds a WMS layer to the map. The WMS  is created from</span>
<span class="sd">            the specified URL, and it is added to the map with the specified</span>
<span class="sd">            name, attribution, visibility, and tile size.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the tile layer.</span>
<span class="sd">            layers (str): The layers to include in the WMS request.</span>
<span class="sd">            format (str, optional): The format of the tiles in the layer.</span>
<span class="sd">            name (str, optional): The name to use for the layer. Defaults to</span>
<span class="sd">                &#39;WMS Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">                default. Defaults to True.</span>
<span class="sd">            tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">                Defaults to 256.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the RasterTileSource class.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">?service=WMS&amp;request=GetMap&amp;layers=</span><span class="si">{</span><span class="n">layers</span><span class="si">}</span><span class="s2">&amp;styles=&amp;format=</span><span class="si">{</span><span class="nb">format</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">%2F</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&amp;transparent=true&amp;version=1.1.1&amp;height=256&amp;width=256&amp;srs=EPSG%3A3857&amp;bbox=</span><span class="se">{{</span><span class="s2">bbox-epsg-3857</span><span class="se">}}</span><span class="s2">&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">asset_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Google Earth Engine&quot;</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ee_initialize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Google Earth Engine tile layer to the map based on the tile layer URL from</span>
<span class="sd">            https://github.com/opengeos/ee-tile-layers/blob/main/datasets.tsv.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (object): The Earth Engine object to display.</span>
<span class="sd">            vis_params (dict): Visualization parameters. For example, {&#39;min&#39;: 0, &#39;max&#39;: 100}.</span>
<span class="sd">            asset_id (str): The ID of the Earth Engine asset.</span>
<span class="sd">            name (str, optional): The name of the tile layer. If not provided,</span>
<span class="sd">                the asset ID will be used. Default is None.</span>
<span class="sd">            opacity (float, optional): The opacity of the tile layer (0 to 1).</span>
<span class="sd">                Default is 1.</span>
<span class="sd">            attribution (str, optional): The attribution text to be displayed.</span>
<span class="sd">                Default is &quot;Google Earth Engine&quot;.</span>
<span class="sd">            visible (bool, optional): Whether the tile layer should be shown on</span>
<span class="sd">                the map. Default is True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            ee_initialize (bool, optional): Whether to initialize the Earth Engine</span>
<span class="sd">            **kwargs: Additional keyword arguments to be passed to the underlying</span>
<span class="sd">                `add_tile_layer` method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">asset_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
                <span class="s2">&quot;https://raw.githubusercontent.com/opengeos/ee-tile-layers/main/datasets.tsv&quot;</span><span class="p">,</span>
                <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">asset_id</span>

            <span class="k">if</span> <span class="n">asset_id</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">asset_id</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                    <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                    <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                    <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The provided EE tile layer </span><span class="si">{</span><span class="n">asset_id</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ee_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">geemap</span>
                <span class="kn">from</span> <span class="nn">geemap.ee_tile_layers</span> <span class="kn">import</span> <span class="n">_get_tile_url_format</span>

                <span class="k">if</span> <span class="n">ee_initialize</span><span class="p">:</span>
                    <span class="n">geemap</span><span class="o">.</span><span class="n">ee_initialize</span><span class="p">()</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">_get_tile_url_format</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;EE Layer&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                    <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                    <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                    <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Please install the `geemap` package to use the `add_ee_layer` function.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>

    <span class="k">def</span> <span class="nf">add_cog_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Cloud Optimized Geotiff (COG) TileLayer to the map.</span>

<span class="sd">        This method adds a COG TileLayer to the map. The COG TileLayer is created</span>
<span class="sd">        from the specified URL, and it is added to the map with the specified name,</span>
<span class="sd">        attribution, opacity, visibility, and bands.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the COG tile layer.</span>
<span class="sd">            name (str, optional): The name to use for the layer. If None, a</span>
<span class="sd">                random name is generated. Defaults to None.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by default.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            bands (list, optional): A list of bands to use for the layer.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            nodata (float, optional): The nodata value to use for the layer.</span>
<span class="sd">            titiler_endpoint (str, optional): The endpoint of the titiler service.</span>
<span class="sd">                Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of</span>
<span class="sd">                the map to fit the bounds of the layer. Defaults to True.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">                nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">                    colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">                and https://cogeotiff.github.io/rio-tiler/colormap/.</span>
<span class="sd">                    To select a certain bands, use bidx=[1, 2, 3]. apply a</span>
<span class="sd">                        rescaling to multiple bands, use something like</span>
<span class="sd">                        `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;COG_&quot;</span> <span class="o">+</span> <span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">()</span>

        <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_tile</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">visible</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

    <span class="k">def</span> <span class="nf">add_stac_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">collection</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">item</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">assets</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;STAC Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a STAC TileLayer to the map.</span>

<span class="sd">        This method adds a STAC TileLayer to the map. The STAC TileLayer is</span>
<span class="sd">        created from the specified URL, collection, item, assets, and bands, and</span>
<span class="sd">        it is added to the map with the specified name, attribution, opacity,</span>
<span class="sd">        visibility, and fit bounds.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str, optional): HTTP URL to a STAC item, e.g., https://bit.ly/3VlttGm.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            collection (str, optional): The Microsoft Planetary Computer STAC</span>
<span class="sd">                collection ID, e.g., landsat-8-c2-l2. Defaults to None.</span>
<span class="sd">            item (str, optional): The Microsoft Planetary Computer STAC item ID, e.g.,</span>
<span class="sd">                LC08_L2SP_047027_20201204_02_T1. Defaults to None.</span>
<span class="sd">            assets (str | list, optional): The Microsoft Planetary Computer STAC asset ID,</span>
<span class="sd">                e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">            bands (list, optional): A list of band names, e.g.,</span>
<span class="sd">                [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">            no_data (int | float, optional): The nodata value to use for the layer.</span>
<span class="sd">            titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;,</span>
<span class="sd">                &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;,</span>
<span class="sd">                &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">            name (str, optional): The layer name to use for the layer. Defaults to &#39;STAC Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">            visible (bool, optional): A flag indicating whether the layer should</span>
<span class="sd">                be on by default. Defaults to True.</span>
<span class="sd">            fit_bounds (bool, optional): A flag indicating whether the map should</span>
<span class="sd">                be zoomed to the layer extent. Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">                nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">                colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">                and https://cogeotiff.github.io/rio-tiler/colormap/. To select</span>
<span class="sd">                a certain bands, use bidx=[1, 2, 3]. apply a rescaling to multiple</span>
<span class="sd">                bands, use something like `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;colormap_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">)</span>

        <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_tile</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">collection</span><span class="p">,</span>
            <span class="n">item</span><span class="p">,</span>
            <span class="n">assets</span><span class="p">,</span>
            <span class="n">bands</span><span class="p">,</span>
            <span class="n">titiler_endpoint</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">visible</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

    <span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Localtileserver&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Raster&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;cors_all&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a local raster dataset to the map.</span>
<span class="sd">            If you are using this function in JupyterHub on a remote server</span>
<span class="sd">            (e.g., Binder, Microsoft Planetary Computer) and if the raster</span>
<span class="sd">            does not render properly, try installing jupyter-server-proxy using</span>
<span class="sd">            `pip install jupyter-server-proxy`, then running the following code</span>
<span class="sd">            before calling this function. For more info, see https://bit.ly/3JbmF93.</span>

<span class="sd">            import os</span>
<span class="sd">            os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            source (str): The path to the GeoTIFF file or the URL of the Cloud</span>
<span class="sd">                Optimized GeoTIFF.</span>
<span class="sd">            indexes (int, optional): The band(s) to use. Band indexing starts</span>
<span class="sd">                at 1. Defaults to None.</span>
<span class="sd">            colormap (str, optional): The name of the colormap from `matplotlib`</span>
<span class="sd">                to use when plotting a single band.</span>
<span class="sd">                See https://matplotlib.org/stable/gallery/color/colormap_reference.html.</span>
<span class="sd">                Default is greyscale.</span>
<span class="sd">            vmin (float, optional): The minimum value to use when colormapping</span>
<span class="sd">                the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            vmax (float, optional): The maximum value to use when colormapping</span>
<span class="sd">                the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            nodata (float, optional): The value from the band to use to interpret</span>
<span class="sd">                as not valid data. Defaults to None.</span>
<span class="sd">            attribution (str, optional): Attribution for the source raster. This</span>
<span class="sd">                defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to use. Defaults to &#39;Raster&#39;.</span>
<span class="sd">            layer_index (int, optional): The index of the layer. Defaults to None.</span>
<span class="sd">            zoom_to_layer (bool, optional): Whether to zoom to the extent of the</span>
<span class="sd">                layer. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            array_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">                `array_to_memory_file` when reading the raster. Defaults to {}.</span>
<span class="sd">            client_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">                localtileserver.TileClient. Defaults to { &quot;cors_all&quot;: False }.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">array_to_image</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">array_args</span><span class="p">)</span>

        <span class="n">tile_layer</span><span class="p">,</span> <span class="n">tile_client</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_local_tile_layer</span><span class="p">(</span>
            <span class="n">source</span><span class="p">,</span>
            <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span>
            <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">client_args</span><span class="o">=</span><span class="n">client_args</span><span class="p">,</span>
            <span class="n">return_client</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">tile_layer</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>  <span class="c1"># [ymin, ymax, xmin, xmax]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
        <span class="c1"># [minx, miny, maxx, maxy]</span>
        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Awesome Map&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
        <span class="n">replace_key</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">remove_port</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the map to an HTML page.</span>

<span class="sd">        Args:</span>
<span class="sd">            output (str, optional): The output HTML file. If None, the HTML content</span>
<span class="sd">                is returned as a string. Defaults</span>
<span class="sd">            title (str, optional): The title of the HTML page. Defaults to &#39;My Awesome Map&#39;.</span>
<span class="sd">            width (str, optional): The width of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">            height (str, optional): The height of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">            replace_key (bool, optional): Whether to replace the API key in the HTML.</span>
<span class="sd">                If True, the API key is replaced with the public API key.</span>
<span class="sd">                The API key is read from the environment variable `MAPTILER_KEY`.</span>
<span class="sd">                The public API key is read from the environment variable `MAPTILER_KEY_PUBLIC`.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            remove_port (bool, optional): Whether to remove the port number from the HTML.</span>
<span class="sd">            preview (bool, optional): Whether to preview the HTML file in a web browser.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite the output file if it already exists.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">                `maplibre.ipywidget.MapWidget.to_html()` method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The HTML content of the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">height</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;style&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">height</span><span class="p">):</span>
            <span class="n">style_before</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
            <span class="n">style_after</span> <span class="o">=</span> <span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;html, body {height: 100%; margin: 0; padding: 0;} #pymaplibregl {width: 100%; height: &quot;&quot;&quot;</span>
                <span class="o">+</span> <span class="n">height</span>
                <span class="o">+</span> <span class="s2">&quot;&quot;&quot;;}</span><span class="se">\n</span><span class="s2">&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
            <span class="p">)</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">style_before</span><span class="p">,</span> <span class="n">style_after</span><span class="p">)</span>

            <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;width: 100%; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
            <span class="n">div_after</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

            <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">replace_key</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPTILER_REPLACE_KEY&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">key_before</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
            <span class="n">key_after</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY_PUBLIC&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key_after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">key_before</span><span class="p">,</span> <span class="n">key_after</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">remove_port</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">remove_port_from_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPLIBRE_OUTPUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output</span><span class="p">:</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
                <span class="kn">import</span> <span class="nn">glob</span>

                <span class="n">num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="s2">&quot;*.html&quot;</span><span class="p">)))</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">.html&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">preview</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">webbrowser</span>

                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">set_paint_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the opacity of a layer.</span>

<span class="sd">        This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            opacity (float): The opacity value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">prop</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_layout_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the layout property of a layer.</span>

<span class="sd">        This method sets the layout property of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            prop (str): The layout property to set.</span>
<span class="sd">            value (Any): The value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the color of a layer.</span>

<span class="sd">        This method sets the color of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            color (str): The color value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">color</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

    <span class="k">def</span> <span class="nf">set_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the opacity of a layer.</span>

<span class="sd">        This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            opacity (float): The opacity value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
            <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the visibility of a layer.</span>

<span class="sd">        This method sets the visibility of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            visible (bool): The visibility value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">visible</span>

    <span class="k">def</span> <span class="nf">layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ipywidgets.Widget: The layer widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

        <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">layer_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

        <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span>
            <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hbox</span>

    <span class="k">def</span> <span class="nf">style_layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a style layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The is of the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ipywidgets.Widget: The layer widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

        <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">layer_ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">visibility</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">extract_rgb</span><span class="p">(</span><span class="n">rgba_string</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">re</span>

            <span class="c1"># Extracting the RGB values using regex</span>
            <span class="n">rgb_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">rgba_string</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">rgb_tuple</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

        <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>

            <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
                <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">visibility</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">opacity</span>

            <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">color</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">color</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span>
                <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span> <span class="k">if</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;none&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
                <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span>
            <span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hbox</span>

    <span class="k">def</span> <span class="nf">_basemap_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ipywidgets.Widget: The layer widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

        <span class="n">layer_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span>
        <span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="n">tile</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]],</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">],</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">raster_source</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">layer_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Basemap&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;600px&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">old</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;old&quot;</span><span class="p">]</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>

            <span class="n">tile</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
                <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]],</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">],</span>
                <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">raster_source</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

            <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span>
            <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>

        <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hbox</span>

    <span class="k">def</span> <span class="nf">add_pmtiles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">exclude_mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;PMTiles&quot;</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a PMTiles layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the PMTiles file.</span>
<span class="sd">            style (dict, optional): The CSS style to apply to the layer. Defaults to None.</span>
<span class="sd">                See https://docs.mapbox.com/style-spec/reference/layers/ for more info.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be shown initially. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            exclude_mask (bool, optional): Whether to exclude the mask layer. Defaults to False.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the layer. Defaults to True.</span>
<span class="sd">            properties (dict, optional): The properties to use for the tooltips. Defaults to None.</span>
<span class="sd">            template (str, optional): The template to use for the tooltips. Defaults to None.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer. Defaults to &#39;PMTiles&#39;.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to zoom to the layer extent. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the PMTilesLayer constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>

            <span class="n">pmtiles_source</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;pmtiles://</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="n">attribution</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_style</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">style</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">pmtiles_source</span><span class="p">)</span>

            <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_hyphens_in_keys</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]:</span>

                <span class="k">if</span> <span class="n">exclude_mask</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source_layer&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mask&quot;</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">visible</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">])</span>
                            <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">opacity</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">tooltip</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_tooltip</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_metadata</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>  <span class="c1"># [minx, miny, maxx, maxy]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_marker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">marker</span><span class="p">:</span> <span class="n">Marker</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lng_lat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">popup</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a marker to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            marker (Marker, optional): A Marker object. Defaults to None.</span>
<span class="sd">            lng_lat (List[Union[float, float]]): A list of two floats</span>
<span class="sd">                representing the longitude and latitude of the marker.</span>
<span class="sd">            popup (Optional[str], optional): The text to display in a popup when</span>
<span class="sd">                the marker is clicked. Defaults to None.</span>
<span class="sd">            options (Optional[Dict], optional): A dictionary of options to</span>
<span class="sd">                customize the marker. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">lng_lat</span><span class="o">=</span><span class="n">lng_lat</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fly_to</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">speed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">essential</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes the map fly to a specified location.</span>

<span class="sd">        Args:</span>
<span class="sd">            lon (float): The longitude of the location to fly to.</span>
<span class="sd">            lat (float): The latitude of the location to fly to.</span>
<span class="sd">            zoom (Optional[float], optional): The zoom level to use when flying</span>
<span class="sd">                to the location. Defaults to None.</span>
<span class="sd">            speed (Optional[float], optional): The speed of the fly animation.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            essential (bool, optional): Whether the flyTo animation is considered</span>
<span class="sd">                essential and not affected by prefers-reduced-motion. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the flyTo function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span>
        <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zoom</span>
        <span class="k">if</span> <span class="n">speed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed</span>
        <span class="k">if</span> <span class="n">essential</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;essential&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">essential</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;flyTo&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads an image from a URL or a local file path and returns a dictionary</span>
<span class="sd">            with the image data.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (str): The URL or local file path to the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Union[int, List[int]]]: A dictionary with the image width,</span>
<span class="sd">                height, and flattened data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the image argument is not a string representing a URL</span>
<span class="sd">                or a local file path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">os</span>
        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
                        <span class="n">image</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The image file does not exist.&quot;</span><span class="p">)</span>

                <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
                <span class="c1"># Convert image to numpy array and then flatten it</span>
                <span class="n">img_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">img_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">img_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="c1"># Split the grayscale and alpha channels</span>
                    <span class="n">gray_channel</span> <span class="o">=</span> <span class="n">img_data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">alpha_channel</span> <span class="o">=</span> <span class="n">img_data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>

                    <span class="c1"># Create the R, G, and B channels by duplicating the grayscale channel</span>
                    <span class="n">R_channel</span> <span class="o">=</span> <span class="n">gray_channel</span>
                    <span class="n">G_channel</span> <span class="o">=</span> <span class="n">gray_channel</span>
                    <span class="n">B_channel</span> <span class="o">=</span> <span class="n">gray_channel</span>

                    <span class="c1"># Combine the channels into an RGBA image</span>
                    <span class="n">RGBA_image_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">R_channel</span><span class="p">,</span> <span class="n">G_channel</span><span class="p">,</span> <span class="n">B_channel</span><span class="p">,</span> <span class="n">alpha_channel</span><span class="p">),</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span>
                    <span class="p">)</span>

                    <span class="c1"># Update img_data to the new RGBA image data</span>
                    <span class="n">img_data</span> <span class="o">=</span> <span class="n">RGBA_image_data</span>

                <span class="n">flat_img_data</span> <span class="o">=</span> <span class="n">img_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

                <span class="c1"># Create the image dictionary with the flattened data</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">flat_img_data</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>  <span class="c1"># Convert to list if necessary</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="n">image_dict</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The image must be a URL or a local file path.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">icon_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The layer ID of the image.</span>
<span class="sd">            image (Union[str, Dict, np.ndarray]): The URL or local file path to</span>
<span class="sd">                the image, or a dictionary containing image data, or a numpy</span>
<span class="sd">                array representing the image.</span>
<span class="sd">            width (int, optional): The width of the image. Defaults to None.</span>
<span class="sd">            height (int, optional): The height of the image. Defaults to None.</span>
<span class="sd">            coordinates (List[float], optional): The longitude and latitude</span>
<span class="sd">                coordinates to place the image.</span>
<span class="sd">            position (str, optional): The position of the image. Defaults to None.</span>
<span class="sd">                Can be one of &#39;top-right&#39;, &#39;top-left&#39;, &#39;bottom-right&#39;, &#39;bottom-left&#39;.</span>
<span class="sd">            icon_size (float, optional): The size of the icon. Defaults to 1.0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>

        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px; &quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; &quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px; &quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; &quot;</span>

        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot; style=&quot;</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="n">image</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The image must be a URL, a local file path, or a numpy array.&quot;</span>
                <span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;addImage&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">image_dict</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">coordinates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

                <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
                                <span class="p">},</span>
                            <span class="p">}</span>
                        <span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">}</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;image_point&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_points&quot;</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;symbol&quot;</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_point&quot;</span>
                <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">icon_size</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_symbol</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">icon_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">symbol_placement</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maxzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a symbol to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (str): The URL or local file path to the image.</span>
<span class="sd">            source (str): The source of the symbol.</span>
<span class="sd">            icon_size (int, optional): The size of the symbol. Defaults to 1.</span>
<span class="sd">            symbol_placement (str, optional): The placement of the symbol. Defaults to &quot;line&quot;.</span>
<span class="sd">            minzoom (Optional[float], optional): The minimum zoom level for the symbol. Defaults to None.</span>
<span class="sd">            maxzoom (Optional[float], optional): The maximum zoom level for the symbol. Defaults to None.</span>
<span class="sd">            filter (Optional[Any], optional): A filter to apply to the symbol. Defaults to None.</span>
<span class="sd">            name (Optional[str], optional): The name of the symbol layer. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to pass to the layer layout.</span>
<span class="sd">                For more info, see https://maplibre.org/maplibre-style-spec/layers/#symbol</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;symbol_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source</span><span class="p">,</span>
            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;icon-image&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span>
                <span class="s2">&quot;icon-size&quot;</span><span class="p">:</span> <span class="n">icon_size</span><span class="p">,</span>
                <span class="s2">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="n">symbol_placement</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">minzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;minzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minzoom</span>
        <span class="k">if</span> <span class="n">maxzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxzoom</span>
        <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_streamlit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
        <span class="n">scrolling</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the map to a Streamlit component.</span>

<span class="sd">        This function converts the map to a Streamlit component by encoding the</span>
<span class="sd">        HTML representation of the map as base64 and embedding it in an iframe.</span>
<span class="sd">        The width, height, and scrolling parameters control the appearance of</span>
<span class="sd">        the iframe.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (Optional[int]): The width of the iframe. If None, the width</span>
<span class="sd">                will be determined by Streamlit.</span>
<span class="sd">            height (Optional[int]): The height of the iframe. Default is 600.</span>
<span class="sd">            scrolling (Optional[bool]): Whether the iframe should be scrollable.</span>
<span class="sd">                Default is False.</span>
<span class="sd">            **kwargs (Any): Additional arguments to pass to the Streamlit iframe</span>
<span class="sd">                function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The Streamlit component.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If there is an error in creating the Streamlit component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>  <span class="c1"># pylint: disable=E0401</span>
            <span class="kn">import</span> <span class="nn">base64</span>

            <span class="n">raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">raw_html</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">iframe</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;data:text/html;base64,</span><span class="si">{</span><span class="n">raw_html</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate_to</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rotate the map to a specified bearing.</span>

<span class="sd">        This function rotates the map to a specified bearing. The bearing is specified in degrees</span>
<span class="sd">        counter-clockwise from true north. If the bearing is not specified, the map will rotate to</span>
<span class="sd">        true north. Additional options and keyword arguments can be provided to control the rotation.</span>
<span class="sd">        For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#rotateto</span>

<span class="sd">        Args:</span>
<span class="sd">            bearing (float): The bearing to rotate to, in degrees counter-clockwise from true north.</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the rotation. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the rotation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;rotateTo&quot;</span><span class="p">,</span> <span class="n">bearing</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">open_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;widgets.FileUpload&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a file uploader widget to upload a GeoJSON file. When a file is</span>
<span class="sd">        uploaded, it is written to a temporary file and added to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            widgets.FileUpload: The file uploader widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

        <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
            <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span>  <span class="c1"># Accept GeoJSON files</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Only single file upload</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Open GeoJSON&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
            <span class="n">temp_file</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">uploader</span>

    <span class="k">def</span> <span class="nf">pan_to</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lnglat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pans the map to a specified location.</span>

<span class="sd">        This function pans the map to the specified longitude and latitude coordinates.</span>
<span class="sd">        Additional options and keyword arguments can be provided to control the panning.</span>
<span class="sd">        For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#panto</span>

<span class="sd">        Args:</span>
<span class="sd">            lnglat (List[float, float]): The longitude and latitude coordinates to pan to.</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the panning. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the panning.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;panTo&quot;</span><span class="p">,</span> <span class="n">lnglat</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_pitch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the pitch of the map.</span>

<span class="sd">        This function sets the pitch of the map to the specified value. The pitch is the</span>
<span class="sd">        angle of the camera measured in degrees where 0 is looking straight down, and 60 is</span>
<span class="sd">        looking towards the horizon. Additional keyword arguments can be provided to control</span>
<span class="sd">        the pitch. For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#setpitch</span>

<span class="sd">        Args:</span>
<span class="sd">            pitch (float): The pitch value to set.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the pitch.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setPitch&quot;</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">jump_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Jumps the map to a specified location.</span>

<span class="sd">        This function jumps the map to the specified location with the specified options.</span>
<span class="sd">        Additional keyword arguments can be provided to control the jump. For more information,</span>
<span class="sd">        see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#jumpto</span>

<span class="sd">        Args:</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the jump. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the jump.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;jumpTo&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_3d_terrain_style</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">satellite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">exaggeration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the 3D terrain style for the map.</span>

<span class="sd">        This function generates a style dictionary for the map that includes 3D terrain features.</span>
<span class="sd">        The terrain exaggeration and API key can be specified. If the API key is not provided,</span>
<span class="sd">        it will be retrieved using the specified token.</span>

<span class="sd">        Args:</span>
<span class="sd">            exaggeration (float, optional): The terrain exaggeration. Defaults to 1.</span>
<span class="sd">            token (str, optional): The token to use to retrieve the API key. Defaults to &quot;MAPTILER_KEY&quot;.</span>
<span class="sd">            api_key (Optional[str], optional): The API key. If not provided, it will be retrieved using the token.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The style dictionary for the map.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the API key is not provided and cannot be retrieved using the token.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An API key is required to use the 3D terrain feature.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;dark-matter&quot;</span>

        <span class="n">layers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">satellite</span><span class="p">:</span>
            <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">})</span>

        <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;hills&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">,</span>
                <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;visibility&quot;</span><span class="p">:</span> <span class="s2">&quot;visible&quot;</span><span class="p">},</span>
                <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hillshade-shadow-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#473B24&quot;</span><span class="p">},</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;https://api.maptiler.com/tiles/satellite-v2/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.jpg?key=&quot;</span>
                        <span class="o">+</span> <span class="n">api_key</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
                    <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="s2">&quot;&amp;copy; MapTiler&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;terrainSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="n">layers</span><span class="p">,</span>
            <span class="s2">&quot;terrain&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;terrainSource&quot;</span><span class="p">,</span> <span class="s2">&quot;exaggeration&quot;</span><span class="p">:</span> <span class="n">exaggeration</span><span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">style</span>

    <span class="k">def</span> <span class="nf">get_style</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the style of the map.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict: The style of the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">)</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">return</span> <span class="n">style</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get_style_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">return_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the names of the basemap layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The names of the basemap layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">return_ids</span><span class="p">:</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">sorted</span><span class="p">:</span>
                    <span class="n">ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

                <span class="k">return</span> <span class="n">ids</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layers</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">find_style_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for a style layer in the map&#39;s current style by its ID and returns it if found.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the style layer to find.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Dict]: The style layer as a dictionary if found, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layer</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">zoom_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zooms the map to a specified zoom level.</span>

<span class="sd">        This function zooms the map to the specified zoom level. Additional options and keyword</span>
<span class="sd">        arguments can be provided to control the zoom. For more information, see</span>
<span class="sd">        https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#zoomto</span>

<span class="sd">        Args:</span>
<span class="sd">            zoom (float): The zoom level to zoom to.</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the zoom. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the zoom.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;zoomTo&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_first_symbol_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the first symbol layer in the map&#39;s current style.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Dict]: The first symbol layer as a dictionary if found, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layer</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">fontcolor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">bold</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">padding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">border_radius</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds text to the map with customizable styling.</span>

<span class="sd">        This method allows adding a text widget to the map with various styling options such as font size, color,</span>
<span class="sd">        background color, and more. The text&#39;s appearance can be further customized using additional CSS properties</span>
<span class="sd">        passed through kwargs.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The text to add to the map.</span>
<span class="sd">            fontsize (int, optional): The font size of the text. Defaults to 20.</span>
<span class="sd">            fontcolor (str, optional): The color of the text. Defaults to &quot;black&quot;.</span>
<span class="sd">            bold (bool, optional): If True, the text will be bold. Defaults to False.</span>
<span class="sd">            padding (str, optional): The padding around the text. Defaults to &quot;5px&quot;.</span>
<span class="sd">            bg_color (str, optional): The background color of the text widget. Defaults to &quot;white&quot;.</span>
<span class="sd">                To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">                To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">            border_radius (str, optional): The border radius of the text widget. Defaults to &quot;5px&quot;.</span>
<span class="sd">            position (str, optional): The position of the text widget on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            **kwargs (Any): Additional CSS properties to apply to the text widget.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">InfoBoxControl</span>

        <span class="k">if</span> <span class="n">bg_color</span> <span class="o">==</span> <span class="s2">&quot;transparent&quot;</span> <span class="ow">and</span> <span class="s2">&quot;box-shadow&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;box-shadow&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>

        <span class="n">css_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">; padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        background-color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">; border-radius: </span><span class="si">{</span><span class="n">border_radius</span><span class="si">}</span><span class="s2">;&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">css_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">;&quot;</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">InfoBoxControl</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_html</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add HTML content to the map.</span>

<span class="sd">        This method allows for the addition of arbitrary HTML content to the map, which can be used to display</span>
<span class="sd">        custom information or controls. The background color and position of the HTML content can be customized.</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str): The HTML content to add.</span>
<span class="sd">            bg_color (str, optional): The background color of the HTML content. Defaults to &quot;white&quot;.</span>
<span class="sd">                To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">                To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">            position (str, optional): The position of the HTML content on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">                &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if an HTML string contains local images and convert them to base64.</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_html_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
        <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a legend to the map.</span>

<span class="sd">        This method allows for the addition of a legend to the map. The legend can be customized with a title,</span>
<span class="sd">        labels, colors, and more. A built-in legend can also be specified.</span>

<span class="sd">        Args:</span>
<span class="sd">            title (str, optional): The title of the legend. Defaults to &quot;Legend&quot;.</span>
<span class="sd">            legend_dict (Optional[Dict[str, str]], optional): A dictionary with legend items as keys and colors as values.</span>
<span class="sd">                If provided, `labels` and `colors` will be ignored. Defaults to None.</span>
<span class="sd">            labels (Optional[List[str]], optional): A list of legend labels. Defaults to None.</span>
<span class="sd">            colors (Optional[List[str]], optional): A list of colors corresponding to the labels. Defaults to None.</span>
<span class="sd">            fontsize (int, optional): The font size of the legend text. Defaults to 15.</span>
<span class="sd">            bg_color (str, optional): The background color of the legend. Defaults to &quot;white&quot;.</span>
<span class="sd">                To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">                To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">            position (str, optional): The position of the legend on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">                &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            builtin_legend (Optional[str], optional): The name of a built-in legend to use. Defaults to None.</span>
<span class="sd">            shape_type (str, optional): The shape type of the legend items. Can be one of &quot;rectangle&quot;, &quot;circle&quot;, or &quot;line&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">importlib.resources</span>
        <span class="kn">from</span> <span class="nn">.legends</span> <span class="kn">import</span> <span class="n">builtin_legends</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">importlib</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s2">&quot;leafmap&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;leafmap.py&quot;</span><span class="p">)</span>
        <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/template/legend.html&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend template does not exist.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys must be a list.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;One&quot;</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="s2">&quot;Three&quot;</span><span class="p">,</span> <span class="s2">&quot;Four&quot;</span><span class="p">,</span> <span class="s2">&quot;etc&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list of tuples.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys and values must be the same length.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend dict must be a dictionary.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The position must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span>
            <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;      &lt;li&gt;&lt;span style=&#39;background:</span><span class="si">{}</span><span class="s2">;&#39;&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">color</span><span class="p">,</span> <span class="n">key</span>
            <span class="p">)</span>
            <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="n">legend_html</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="n">footer</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">legend_html</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
            <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;width: 30px&quot;</span><span class="p">,</span> <span class="s2">&quot;width: 16px&quot;</span><span class="p">)</span>
            <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;border: 1px solid #999;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;border-radius: 50%;</span><span class="se">\n</span><span class="s2">      border: 1px solid #999;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;height: 16px&quot;</span><span class="p">,</span> <span class="s2">&quot;height: 3px&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span>
            <span class="n">legend_text</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
            <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">vmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">label_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
        <span class="n">tick_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a colorbar to the map.</span>

<span class="sd">        This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using</span>
<span class="sd">        the Map.add_html() method. The colorbar can be customized in various ways including its size, color palette,</span>
<span class="sd">        label, and orientation.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (Optional[float]): Width of the colorbar in inches. Defaults to 3.0.</span>
<span class="sd">            height (Optional[float]): Height of the colorbar in inches. Defaults to 0.2.</span>
<span class="sd">            vmin (Optional[float]): Minimum value of the colorbar. Defaults to 0.</span>
<span class="sd">            vmax (Optional[float]): Maximum value of the colorbar. Defaults to 1.0.</span>
<span class="sd">            palette (Optional[List[str]]): List of colors or a colormap name for the colorbar. Defaults to None.</span>
<span class="sd">            vis_params (Optional[Dict[str, Union[str, float, int]]]): Visualization parameters as a dictionary.</span>
<span class="sd">            cmap (Optional[str]): Matplotlib colormap name. Defaults to &quot;gray&quot;.</span>
<span class="sd">            discrete (Optional[bool]): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">            label (Optional[str]): Label for the colorbar. Defaults to None.</span>
<span class="sd">            label_size (Optional[int]): Font size for the colorbar label. Defaults to 10.</span>
<span class="sd">            label_weight (Optional[str]): Font weight for the colorbar label. Defaults to &quot;normal&quot;.</span>
<span class="sd">            tick_size (Optional[int]): Font size for the colorbar tick labels. Defaults to 8.</span>
<span class="sd">            bg_color (Optional[str]): Background color for the colorbar. Defaults to &quot;white&quot;.</span>
<span class="sd">            orientation (Optional[str]): Orientation of the colorbar (&quot;vertical&quot; or &quot;horizontal&quot;). Defaults to &quot;horizontal&quot;.</span>
<span class="sd">            dpi (Optional[Union[str, float]]): Resolution in dots per inch. If &#39;figure&#39;, uses the figure&#39;s dpi value. Defaults to &quot;figure&quot;.</span>
<span class="sd">            transparent (Optional[bool]): Whether the background is transparent. Defaults to False.</span>
<span class="sd">            position (str): Position of the colorbar on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments passed to matplotlib.pyplot.savefig().</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Path to the generated colorbar image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
            <span class="n">bg_color</span> <span class="o">=</span> <span class="s2">&quot;transparent&quot;</span>

        <span class="n">colorbar</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">save_colorbar</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="p">,</span>
            <span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="p">,</span>
            <span class="n">palette</span><span class="p">,</span>
            <span class="n">vis_params</span><span class="p">,</span>
            <span class="n">cmap</span><span class="p">,</span>
            <span class="n">discrete</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">label_size</span><span class="p">,</span>
            <span class="n">label_weight</span><span class="p">,</span>
            <span class="n">tick_size</span><span class="p">,</span>
            <span class="n">bg_color</span><span class="p">,</span>
            <span class="n">orientation</span><span class="p">,</span>
            <span class="n">dpi</span><span class="p">,</span>
            <span class="n">transparent</span><span class="p">,</span>
            <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">colorbar</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="n">css_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
        <span class="n">bg_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a layer control to the map.</span>

<span class="sd">        This function creates and adds a layer switcher control to the map, allowing users to toggle the visibility</span>
<span class="sd">        of specified layers. The appearance and functionality of the layer control can be customized with parameters</span>
<span class="sd">        such as theme, CSS styling, and position on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_ids (Optional[List[str]]): A list of layer IDs to include in the control. If None, all layers</span>
<span class="sd">                in the map will be included. Defaults to None.</span>
<span class="sd">            theme (str): The theme for the layer switcher control. Can be &quot;default&quot; or other custom themes. Defaults to &quot;default&quot;.</span>
<span class="sd">            css_text (Optional[str]): Custom CSS text for styling the layer control. If None, a default style will be applied.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            position (str): The position of the layer control on the map. Can be &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;,</span>
<span class="sd">                or &quot;bottom-right&quot;. Defaults to &quot;top-left&quot;.</span>
<span class="sd">            bg_layers (bool): If True, background layers will be included in the control. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">LayerSwitcherControl</span>

        <span class="k">if</span> <span class="n">layer_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
                <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bg_layers</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">bg_layers</span> <span class="o">+</span> <span class="n">layer_ids</span>
        <span class="k">elif</span> <span class="n">bg_layers</span><span class="p">:</span>
            <span class="n">background_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">background_ids</span> <span class="o">+</span> <span class="n">layer_ids</span>

        <span class="k">if</span> <span class="n">css_text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">css_text</span> <span class="o">=</span> <span class="s2">&quot;padding: 5px; border: 1px solid darkgrey; border-radius: 4px;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">control</span> <span class="o">=</span> <span class="n">LayerSwitcherControl</span><span class="p">(</span>
                <span class="n">layer_ids</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
                <span class="n">theme</span><span class="o">=</span><span class="n">theme</span><span class="p">,</span>
                <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_3d_buildings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
        <span class="n">min_zoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a 3D buildings layer to the map.</span>

<span class="sd">        This function creates and adds a 3D buildings layer to the map using fill-extrusion. The buildings&#39; heights</span>
<span class="sd">        are determined by the &#39;render_height&#39; property, and their colors are interpolated based on specified values.</span>
<span class="sd">        The layer is only visible from a certain zoom level, specified by the &#39;min_zoom&#39; parameter.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the 3D buildings layer. Defaults to &quot;buildings&quot;.</span>
<span class="sd">            min_zoom (int): The minimum zoom level at which the 3D buildings will start to be visible. Defaults to 15.</span>
<span class="sd">            values (List[int]): A list of height values (in meters) used for color interpolation. Defaults to [0, 200, 400].</span>
<span class="sd">            colors (List[str]): A list of colors corresponding to the &#39;values&#39; list. Each color is applied to the</span>
<span class="sd">                building height range defined by the &#39;values&#39;. Defaults to [&quot;lightgray&quot;, &quot;royalblue&quot;, &quot;lightblue&quot;].</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_layer method.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the lengths of &#39;values&#39; and &#39;colors&#39; lists do not match.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">MAPTILER_KEY</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/v3/tiles.json?key=</span><span class="si">{</span><span class="n">MAPTILER_KEY</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>

        <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
            <span class="s2">&quot;min-zoom&quot;</span><span class="p">:</span> <span class="n">min_zoom</span><span class="p">,</span>
            <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
                <span class="p">]</span>
                <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
                    <span class="mi">15</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="mi">16</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
                <span class="p">],</span>
                <span class="s2">&quot;fill-extrusion-base&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;case&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;zoom&quot;</span><span class="p">],</span> <span class="mi">16</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_min_height&quot;</span><span class="p">],</span>
                    <span class="mi">0</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_overture_3d_buildings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">release</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;2024-10-23&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add 3D buildings from Overture Maps to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            release (Optional[str], optional): The release date of the Overture Maps data.</span>
<span class="sd">                Defaults to &quot;2024-10-23&quot;. For more info, see</span>
<span class="sd">                https://github.com/OvertureMaps/overture-tiles.</span>
<span class="sd">            style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">                the buildings. Defaults to None.</span>
<span class="sd">            values (Optional[List[int]], optional): List of height values for</span>
<span class="sd">                color interpolation. Defaults to None.</span>
<span class="sd">            colors (Optional[List[str]], optional): List of colors corresponding</span>
<span class="sd">                to the height values. Defaults to None.</span>
<span class="sd">            visible (bool, optional): Whether the buildings layer is visible.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the buildings layer.</span>
<span class="sd">                Defaults to 1.0.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the buildings.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            template (str, optional): The template for the tooltip. It can be</span>
<span class="sd">                &quot;simple&quot; or &quot;all&quot;. Defaults to &quot;simple&quot;.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">                buildings layer. Defaults to False.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the length of values and colors lists are not the same.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

        <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;simple&quot;</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Name: {{@name}}&lt;br&gt;Subtype: {{subtype}}&lt;br&gt;Class: {{class}}&lt;br&gt;Height: {{height}}&quot;</span>
        <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>
            <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
                <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

            <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="mi">0</span><span class="p">,</span>
                        <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="p">]</span>
                            <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                            <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building-part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="mi">0</span><span class="p">,</span>
                        <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="p">]</span>
                            <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                            <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_overture_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;2024-10-23&quot;</span><span class="p">,</span>
        <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">                &quot;2024-10-23&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">            theme (str, optional): The theme of the data. It can be one of the following:</span>
<span class="sd">                &quot;addresses&quot;, &quot;base&quot;, &quot;buildings&quot;, &quot;divisions&quot;, &quot;places&quot;, &quot;transportation&quot;.</span>
<span class="sd">                Defaults to &quot;buildings&quot;.</span>
<span class="sd">            style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">                the data. Defaults to None.</span>
<span class="sd">            visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">                data layer. Defaults to False.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the add_pmtiles method.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the theme is not one of the allowed themes.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">allowed_themes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
            <span class="s2">&quot;base&quot;</span><span class="p">,</span>
            <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
            <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;places&quot;</span><span class="p">,</span>
            <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_themes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The theme must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_themes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">styles</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Address&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;address&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Infrastructure&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;infrastructure&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_cover&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_cover&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_use&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_use&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Water&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;buildings&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#6ea299&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#fdfdb2&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;divisions&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_area&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_area&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_boundary&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_boundary&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;places&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Place&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;places&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;place&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;transportation&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Segment&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;segment&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Connector&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;connector&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.pmtiles&quot;</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">theme</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_overture_buildings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;2024-10-23&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">                &quot;2024-10-23&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">            style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">                the data. Defaults to None.</span>
<span class="sd">            type (str, optional): The type of the data. It can be &quot;line&quot; or &quot;fill&quot;.</span>
<span class="sd">            visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">                data layer. Defaults to False.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the paint properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;line-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;line-width&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="s2">&quot;line-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;fill-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#6ea299&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;fill-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_video</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">urls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span>
        <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a video layer to the map.</span>

<span class="sd">        This method allows embedding a video into the map by specifying the video URLs and the geographical coordinates</span>
<span class="sd">        that the video should cover. The video will be stretched and fitted into the specified coordinates.</span>

<span class="sd">        Args:</span>
<span class="sd">            urls (Union[str, List[str]]): A single video URL or a list of video URLs. These URLs must be accessible</span>
<span class="sd">                from the client&#39;s location.</span>
<span class="sd">            coordinates (List[List[float]]): A list of four coordinates in [longitude, latitude] format, specifying</span>
<span class="sd">                the corners of the video. The coordinates order should be top-left, top-right, bottom-right, bottom-left.</span>
<span class="sd">            layer_id (str): The ID for the video layer. Defaults to &quot;video&quot;.</span>
<span class="sd">            before_id (Optional[str]): The ID of an existing layer to insert the new layer before. If None, the layer</span>
<span class="sd">                will be added on top. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>
        <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
            <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="n">urls</span><span class="p">,</span>
            <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;video_source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;video_source&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_nlcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">years</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2023</span><span class="p">],</span> <span class="n">add_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds National Land Cover Database (NLCD) data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            years (list): A list of years to add. It can be any of 1985-2023. Defaults to [2023].</span>
<span class="sd">            add_legend (bool): Whether to add a legend to the map. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_cog_layer method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">allowed_years</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;https://s3-us-west-2.amazonaws.com/mrlc/Annual_NLCD_LndCov_</span><span class="si">{}</span><span class="s2">_CU_C1V0.tif&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;colormap&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>

            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;11&quot;</span><span class="p">:</span> <span class="s2">&quot;#466b9f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;12&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1def8&quot;</span><span class="p">,</span>
                <span class="s2">&quot;21&quot;</span><span class="p">:</span> <span class="s2">&quot;#dec5c5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;22&quot;</span><span class="p">:</span> <span class="s2">&quot;#d99282&quot;</span><span class="p">,</span>
                <span class="s2">&quot;23&quot;</span><span class="p">:</span> <span class="s2">&quot;#eb0000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;24&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab0000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;31&quot;</span><span class="p">:</span> <span class="s2">&quot;#b3ac9f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;41&quot;</span><span class="p">:</span> <span class="s2">&quot;#68ab5f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;42&quot;</span><span class="p">:</span> <span class="s2">&quot;#1c5f2c&quot;</span><span class="p">,</span>
                <span class="s2">&quot;43&quot;</span><span class="p">:</span> <span class="s2">&quot;#b5c58f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;51&quot;</span><span class="p">:</span> <span class="s2">&quot;#af963c&quot;</span><span class="p">,</span>
                <span class="s2">&quot;52&quot;</span><span class="p">:</span> <span class="s2">&quot;#ccb879&quot;</span><span class="p">,</span>
                <span class="s2">&quot;71&quot;</span><span class="p">:</span> <span class="s2">&quot;#dfdfc2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;72&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1d182&quot;</span><span class="p">,</span>
                <span class="s2">&quot;73&quot;</span><span class="p">:</span> <span class="s2">&quot;#a3cc51&quot;</span><span class="p">,</span>
                <span class="s2">&quot;74&quot;</span><span class="p">:</span> <span class="s2">&quot;#82ba9e&quot;</span><span class="p">,</span>
                <span class="s2">&quot;81&quot;</span><span class="p">:</span> <span class="s2">&quot;#dcd939&quot;</span><span class="p">,</span>
                <span class="s2">&quot;82&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab6c28&quot;</span><span class="p">,</span>
                <span class="s2">&quot;90&quot;</span><span class="p">:</span> <span class="s2">&quot;#b8d9eb&quot;</span><span class="p">,</span>
                <span class="s2">&quot;95&quot;</span><span class="p">:</span> <span class="s2">&quot;#6c9fb8&quot;</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="s2">&quot;zoom_to_layer&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom_to_layer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_years</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Year must be one of </span><span class="si">{</span><span class="n">allowed_years</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">year_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_cog_layer</span><span class="p">(</span><span class="n">year_url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;NLCD </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;NLCD Land Cover Type&quot;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="s2">&quot;NLCD&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_gps_trace</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">color_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colormap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">circle_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GPS Trace&quot;</span><span class="p">,</span>
        <span class="n">add_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sort_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">line_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GPS trace to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (Union[str, List[Dict[str, Any]]]): The GPS trace data. It can be a GeoJSON file path or a list of coordinates.</span>
<span class="sd">            x (str, optional): The column name for the x coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">            y (str, optional): The column name for the y coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">            columns (Optional[List[str]], optional): The list of columns to include in the GeoDataFrame. Defaults to None.</span>
<span class="sd">            colormap (Optional[Dict[str, str]], optional): The colormap for the GPS trace. Defaults to None.</span>
<span class="sd">            radius (int, optional): The radius of the GPS trace points. Defaults to 5.</span>
<span class="sd">            circle_color (Optional[Union[str, List[Any]]], optional): The color of the GPS trace points. Defaults to None.</span>
<span class="sd">            stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;#ffffff&quot;.</span>
<span class="sd">            opacity (float, optional): The opacity of the GPS trace points. Defaults to 1.0.</span>
<span class="sd">            paint (Optional[Dict[str, Any]], optional): The paint properties for the GPS trace points. Defaults to None.</span>
<span class="sd">            name (str, optional): The name of the GPS trace layer. Defaults to &quot;GPS Trace&quot;.</span>
<span class="sd">            add_line (bool, optional): If True, adds a line connecting the GPS trace points. Defaults to False.</span>
<span class="sd">            sort_column (Optional[str], optional): The column name to sort the points before connecting them as a line. Defaults to None.</span>
<span class="sd">            line_args (Optional[Dict[str, Any]], optional): Additional arguments for the line layer. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid data type. Use a GeoDataFrame or a list of coordinates.&quot;</span>
            <span class="p">)</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gps_trace&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_line</span><span class="p">:</span>
            <span class="n">line_gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">connect_points_as_line</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">sort_column</span><span class="o">=</span><span class="n">sort_column</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">line_gdf</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;doorstep&quot;</span><span class="p">:</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">,</span>  <span class="c1"># Red</span>
                <span class="s2">&quot;indoor&quot;</span><span class="p">:</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">,</span>  <span class="c1"># Blue</span>
                <span class="s2">&quot;outdoor&quot;</span><span class="p">:</span> <span class="s2">&quot;#00FF00&quot;</span><span class="p">,</span>  <span class="c1"># Green</span>
                <span class="s2">&quot;parked&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>  <span class="c1"># Yellow</span>
                <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFF00&quot;</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;annotation&quot;</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">color_column</span> <span class="o">=</span> <span class="s2">&quot;category&quot;</span>
                <span class="n">gdf</span><span class="p">[</span><span class="n">color_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
                <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;annotation&quot;</span><span class="p">,</span>
                    <span class="n">color_column</span><span class="p">,</span>
                    <span class="s2">&quot;geometry&quot;</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gdf&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">circle_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">circle_color</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="s2">&quot;match&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">color_column</span><span class="p">],</span>
                        <span class="s2">&quot;doorstep&quot;</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;doorstep&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;indoor&quot;</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;indoor&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;outdoor&quot;</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;outdoor&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;parked&quot;</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;parked&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;selected&quot;</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;#CCCCCC&quot;</span><span class="p">,</span>  <span class="c1"># Default color if annotation does not match</span>
                    <span class="p">]</span>

        <span class="k">if</span> <span class="n">circle_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">circle_color</span> <span class="o">=</span> <span class="s2">&quot;#3388ff&quot;</span>

        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="n">radius</span><span class="p">,</span>
                <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="n">circle_color</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="n">stroke_color</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="n">line_gdf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">line_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span><span class="n">line_gdf</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;GPS Trace Line&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">line_args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bearing</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;dark-matter&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;600px&#39;</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;navigation&#39;</span><span class="p">:</span> <span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="s1">&#39;fullscreen&#39;</span><span class="p">:</span> <span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="s1">&#39;bottom-left&#39;</span><span class="p">},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.__init__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create a Map object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>center</code></td>
        <td><code>tuple</code></td>
        <td><p>The center of the map (lon, lat). Defaults
to (0, 20).</p></td>
        <td><code>(0, 20)</code></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>float</code></td>
        <td><p>The zoom level of the map. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>pitch</code></td>
        <td><code>float</code></td>
        <td><p>The pitch of the map. Measured in degrees
away from the plane of the screen (0-85) Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>bearing</code></td>
        <td><code>float</code></td>
        <td><p>The bearing of the map. Measured in degrees
counter-clockwise from north. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>str</code></td>
        <td><p>The style of the map. It can be a string or a URL.
If it is a string, it must be one of the following: "dark-matter", "positron",
"carto-positron", "voyager", "positron-nolabels", "dark-matter-nolabels",
"voyager-nolabels", "demotiles", "liberty", "bright", or "positron2".
If a MapTiler API key is set, you can also use any of the MapTiler styles,
such as aquarelle, backdrop, basic, bright, dataviz, landscape, ocean,
openstreetmap, outdoor, satellite, streets, toner, topo, winter, etc.
If it is a URL, it must point to a MapLibre style JSON. Defaults to "dark-matter".</p></td>
        <td><code>&#39;dark-matter&#39;</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>The height of the map. Defaults to "600px".</p></td>
        <td><code>&#39;600px&#39;</code></td>
      </tr>
      <tr>
        <td><code>controls</code></td>
        <td><code>dict</code></td>
        <td><p>The controls and their positions on the
map. Defaults to {"fullscreen": "top-right", "scale": "bottom-left"}.</p></td>
        <td><code>{&#39;navigation&#39;: &#39;top-right&#39;, &#39;fullscreen&#39;: &#39;top-right&#39;, &#39;scale&#39;: &#39;bottom-left&#39;}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the MapOptions class.
See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/
for more information.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">center</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
    <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;navigation&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a Map object.</span>

<span class="sd">    Args:</span>
<span class="sd">        center (tuple, optional): The center of the map (lon, lat). Defaults</span>
<span class="sd">            to (0, 20).</span>
<span class="sd">        zoom (float, optional): The zoom level of the map. Defaults to 1.</span>
<span class="sd">        pitch (float, optional): The pitch of the map. Measured in degrees</span>
<span class="sd">            away from the plane of the screen (0-85) Defaults to 0.</span>
<span class="sd">        bearing (float, optional): The bearing of the map. Measured in degrees</span>
<span class="sd">            counter-clockwise from north. Defaults to 0.</span>
<span class="sd">        style (str, optional): The style of the map. It can be a string or a URL.</span>
<span class="sd">            If it is a string, it must be one of the following: &quot;dark-matter&quot;, &quot;positron&quot;,</span>
<span class="sd">            &quot;carto-positron&quot;, &quot;voyager&quot;, &quot;positron-nolabels&quot;, &quot;dark-matter-nolabels&quot;,</span>
<span class="sd">            &quot;voyager-nolabels&quot;, &quot;demotiles&quot;, &quot;liberty&quot;, &quot;bright&quot;, or &quot;positron2&quot;.</span>
<span class="sd">            If a MapTiler API key is set, you can also use any of the MapTiler styles,</span>
<span class="sd">            such as aquarelle, backdrop, basic, bright, dataviz, landscape, ocean,</span>
<span class="sd">            openstreetmap, outdoor, satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">            If it is a URL, it must point to a MapLibre style JSON. Defaults to &quot;dark-matter&quot;.</span>
<span class="sd">        height (str, optional): The height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">        controls (dict, optional): The controls and their positions on the</span>
<span class="sd">            map. Defaults to {&quot;fullscreen&quot;: &quot;top-right&quot;, &quot;scale&quot;: &quot;bottom-left&quot;}.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the MapOptions class.</span>
<span class="sd">            See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/</span>
<span class="sd">            for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">carto_basemaps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
        <span class="s2">&quot;positron&quot;</span><span class="p">,</span>
        <span class="s2">&quot;voyager&quot;</span><span class="p">,</span>
        <span class="s2">&quot;positron-nolabels&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dark-matter-nolabels&quot;</span><span class="p">,</span>
        <span class="s2">&quot;voyager-nolabels&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">openfreemap_basemaps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;liberty&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bright&quot;</span><span class="p">,</span>
        <span class="s2">&quot;positron2&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https&quot;</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;The provided style URL is invalid. Falling back to &#39;dark-matter&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span>
        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">maptiler_3d_style</span><span class="p">(</span>
                <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="n">exaggeration</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;exaggeration&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">tile_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tile_size&quot;</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span>
                <span class="n">hillshade</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hillshade&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">openfreemap_basemaps</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;positron2&quot;</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;positron&quot;</span>
            <span class="n">style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tiles.openfreemap.org/styles/</span><span class="si">{</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;demotiles&quot;</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;https://demotiles.maplibre.org/style.json&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;background-&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">background</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">map_options</span> <span class="o">=</span> <span class="n">MapOptions</span><span class="p">(</span>
        <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="n">pitch</span><span class="p">,</span> <span class="n">bearing</span><span class="o">=</span><span class="n">bearing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">map_options</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">use_message_queue</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">control</span><span class="p">,</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">controls</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">BACKGROUND</span><span class="p">),</span>
        <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span><span class="p">,</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="n">style</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">layer</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_3d_buildings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_3d_buildings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;buildings&#39;</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="s1">&#39;royalblue&#39;</span><span class="p">,</span> <span class="s1">&#39;lightblue&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_3d_buildings" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a 3D buildings layer to the map.</p>
<p>This function creates and adds a 3D buildings layer to the map using fill-extrusion. The buildings' heights
are determined by the 'render_height' property, and their colors are interpolated based on specified values.
The layer is only visible from a certain zoom level, specified by the 'min_zoom' parameter.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the 3D buildings layer. Defaults to "buildings".</p></td>
        <td><code>&#39;buildings&#39;</code></td>
      </tr>
      <tr>
        <td><code>min_zoom</code></td>
        <td><code>int</code></td>
        <td><p>The minimum zoom level at which the 3D buildings will start to be visible. Defaults to 15.</p></td>
        <td><code>15</code></td>
      </tr>
      <tr>
        <td><code>values</code></td>
        <td><code>List[int]</code></td>
        <td><p>A list of height values (in meters) used for color interpolation. Defaults to [0, 200, 400].</p></td>
        <td><code>[0, 200, 400]</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>List[str]</code></td>
        <td><p>A list of colors corresponding to the 'values' list. Each color is applied to the
building height range defined by the 'values'. Defaults to ["lightgray", "royalblue", "lightblue"].</p></td>
        <td><code>[&#39;lightgray&#39;, &#39;royalblue&#39;, &#39;lightblue&#39;]</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the add_layer method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the lengths of 'values' and 'colors' lists do not match.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_3d_buildings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
    <span class="n">min_zoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a 3D buildings layer to the map.</span>

<span class="sd">    This function creates and adds a 3D buildings layer to the map using fill-extrusion. The buildings&#39; heights</span>
<span class="sd">    are determined by the &#39;render_height&#39; property, and their colors are interpolated based on specified values.</span>
<span class="sd">    The layer is only visible from a certain zoom level, specified by the &#39;min_zoom&#39; parameter.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the 3D buildings layer. Defaults to &quot;buildings&quot;.</span>
<span class="sd">        min_zoom (int): The minimum zoom level at which the 3D buildings will start to be visible. Defaults to 15.</span>
<span class="sd">        values (List[int]): A list of height values (in meters) used for color interpolation. Defaults to [0, 200, 400].</span>
<span class="sd">        colors (List[str]): A list of colors corresponding to the &#39;values&#39; list. Each color is applied to the</span>
<span class="sd">            building height range defined by the &#39;values&#39;. Defaults to [&quot;lightgray&quot;, &quot;royalblue&quot;, &quot;lightblue&quot;].</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_layer method.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the lengths of &#39;values&#39; and &#39;colors&#39; lists do not match.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">MAPTILER_KEY</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/v3/tiles.json?key=</span><span class="si">{</span><span class="n">MAPTILER_KEY</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>

    <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
        <span class="s2">&quot;min-zoom&quot;</span><span class="p">:</span> <span class="n">min_zoom</span><span class="p">,</span>
        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
            <span class="p">]</span>
            <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
            <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
                <span class="mi">15</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="mi">16</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
            <span class="p">],</span>
            <span class="s2">&quot;fill-extrusion-base&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;case&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;zoom&quot;</span><span class="p">],</span> <span class="mi">16</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_min_height&quot;</span><span class="p">],</span>
                <span class="mi">0</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_arc_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_arc_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">src_lon</span><span class="p">,</span> <span class="n">src_lat</span><span class="p">,</span> <span class="n">dst_lon</span><span class="p">,</span> <span class="n">dst_lat</span><span class="p">,</span> <span class="n">src_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dst_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">layer_id</span><span class="o">=</span><span class="s1">&#39;arc_layer&#39;</span><span class="p">,</span> <span class="n">pickable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_arc_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a DeckGL ArcLayer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Union[str, pd.DataFrame]</code></td>
        <td><p>The file path or DataFrame containing the data.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>src_lon</code></td>
        <td><code>str</code></td>
        <td><p>The source longitude column name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>src_lat</code></td>
        <td><code>str</code></td>
        <td><p>The source latitude column name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dst_lon</code></td>
        <td><code>str</code></td>
        <td><p>The destination longitude column name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dst_lat</code></td>
        <td><code>str</code></td>
        <td><p>The destination latitude column name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>src_color</code></td>
        <td><code>List[int]</code></td>
        <td><p>The source color as an RGB list.</p></td>
        <td><code>[255, 0, 0]</code></td>
      </tr>
      <tr>
        <td><code>dst_color</code></td>
        <td><code>List[int]</code></td>
        <td><p>The destination color as an RGB list.</p></td>
        <td><code>[255, 255, 0]</code></td>
      </tr>
      <tr>
        <td><code>line_width</code></td>
        <td><code>int</code></td>
        <td><p>The width of the lines.</p></td>
        <td><code>2</code></td>
      </tr>
      <tr>
        <td><code>layer_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of the layer.</p></td>
        <td><code>&#39;arc_layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>pickable</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is pickable.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>tooltip</code></td>
        <td><code>Optional[Union[str, List[str]]]</code></td>
        <td><p>The tooltip content or list of columns. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional arguments for the layer.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_arc_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
    <span class="n">src_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">src_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dst_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dst_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">src_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="n">dst_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="n">line_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;arc_layer&quot;</span><span class="p">,</span>
    <span class="n">pickable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a DeckGL ArcLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (Union[str, pd.DataFrame]): The file path or DataFrame containing the data.</span>
<span class="sd">        src_lon (str): The source longitude column name.</span>
<span class="sd">        src_lat (str): The source latitude column name.</span>
<span class="sd">        dst_lon (str): The destination longitude column name.</span>
<span class="sd">        dst_lat (str): The destination latitude column name.</span>
<span class="sd">        src_color (List[int]): The source color as an RGB list.</span>
<span class="sd">        dst_color (List[int]): The destination color as an RGB list.</span>
<span class="sd">        line_width (int): The width of the lines.</span>
<span class="sd">        layer_id (str): The ID of the layer.</span>
<span class="sd">        pickable (bool): Whether the layer is pickable.</span>
<span class="sd">        tooltip (Optional[Union[str, List[str]]], optional): The tooltip content or list of columns. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional arguments for the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>

    <span class="n">arc_data</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;source_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">src_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">src_lat</span><span class="p">]],</span>
            <span class="s2">&quot;target_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">dst_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">dst_lat</span><span class="p">]],</span>
            <span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>  <span class="c1"># Include other columns</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="c1"># Generate tooltip template dynamically based on the columns</span>
    <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tooltip</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">tooltip</span>
    <span class="n">tooltip_content</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">: </span><span class="se">{{{{</span><span class="s2"> </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> </span><span class="se">}}}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">])</span>

    <span class="n">deck_arc_layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;@@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ArcLayer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">arc_data</span><span class="p">,</span>
        <span class="s2">&quot;getSourcePosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=source_position&quot;</span><span class="p">,</span>
        <span class="s2">&quot;getTargetPosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=target_position&quot;</span><span class="p">,</span>
        <span class="s2">&quot;getSourceColor&quot;</span><span class="p">:</span> <span class="n">src_color</span><span class="p">,</span>
        <span class="s2">&quot;getTargetColor&quot;</span><span class="p">:</span> <span class="n">dst_color</span><span class="p">,</span>
        <span class="s2">&quot;getWidth&quot;</span><span class="p">:</span> <span class="n">line_width</span><span class="p">,</span>
        <span class="s2">&quot;pickable&quot;</span><span class="p">:</span> <span class="n">pickable</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">deck_arc_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span>
        <span class="p">[</span><span class="n">deck_arc_layer</span><span class="p">],</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="p">{</span>
            <span class="n">layer_id</span><span class="p">:</span> <span class="n">tooltip_content</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_basemap" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_basemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_basemap" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a basemap to the map.</p>
<p>This method adds a basemap to the map. The basemap can be a string from
predefined basemaps, an instance of xyzservices.TileProvider, or a key
from the basemaps dictionary.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>basemap</code></td>
        <td><code>str or TileProvider</code></td>
        <td><p>The basemap to add. Can be
one of the predefined strings, an instance of xyzservices.TileProvider,
or a key from the basemaps dictionary. Defaults to None, which adds
the basemap widget.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the basemap. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the basemap is visible or not.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution text to display for the
basemap. If None, the attribution text is taken from the basemap
or the TileProvider. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the
RasterTileSource class. See https://bit.ly/4erD2MQ for more information.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the basemap is not one of the predefined strings,
not an instance of TileProvider, and not a key from the basemaps dictionary.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">basemap</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a basemap to the map.</span>

<span class="sd">    This method adds a basemap to the map. The basemap can be a string from</span>
<span class="sd">    predefined basemaps, an instance of xyzservices.TileProvider, or a key</span>
<span class="sd">    from the basemaps dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        basemap (str or TileProvider, optional): The basemap to add. Can be</span>
<span class="sd">            one of the predefined strings, an instance of xyzservices.TileProvider,</span>
<span class="sd">            or a key from the basemaps dictionary. Defaults to None, which adds</span>
<span class="sd">            the basemap widget.</span>
<span class="sd">        opacity (float, optional): The opacity of the basemap. Defaults to 1.0.</span>
<span class="sd">        visible (bool, optional): Whether the basemap is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        attribution (str, optional): The attribution text to display for the</span>
<span class="sd">            basemap. If None, the attribution text is taken from the basemap</span>
<span class="sd">            or the TileProvider. Defaults to None.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">            RasterTileSource class. See https://bit.ly/4erD2MQ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the basemap is not one of the predefined strings,</span>
<span class="sd">            not an instance of TileProvider, and not a key from the basemaps dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">basemap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basemap_widget</span><span class="p">()</span>

    <span class="n">map_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;ROADMAP&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Maps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SATELLITE&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
        <span class="s2">&quot;TERRAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Terrain&quot;</span><span class="p">,</span>
        <span class="s2">&quot;HYBRID&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Hybrid&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span>
    <span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">max_zoom</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">min_zoom</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">map_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_google_map</span><span class="p">(</span><span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">url</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span>
        <span class="n">attribution</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">attribution</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">name</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">attribution</span>
        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>

    <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
            <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
            <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
        <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="p">],</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">max_zoom</span><span class="o">=</span><span class="n">max_zoom</span><span class="p">,</span>
        <span class="n">min_zoom</span><span class="o">=</span><span class="n">min_zoom</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">raster_source</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_cog_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_cog_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_cog_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a Cloud Optimized Geotiff (COG) TileLayer to the map.</p>
<p>This method adds a COG TileLayer to the map. The COG TileLayer is created
from the specified URL, and it is added to the map with the specified name,
attribution, opacity, visibility, and bands.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the COG tile layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to use for the layer. If None, a
random name is generated. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use for the layer.
Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer should be visible by default.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>A list of bands to use for the layer.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The nodata value to use for the layer.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>The endpoint of the titiler service.
Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to adjust the viewport of
the map to fit the bounds of the layer. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Arbitrary keyword arguments, including bidx, expression,
nodata, unscale, resampling, rescale, color_formula, colormap,
    colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/
and https://cogeotiff.github.io/rio-tiler/colormap/.
    To select a certain bands, use bidx=[1, 2, 3]. apply a
        rescaling to multiple bands, use something like
        <code>rescale=["164,223","130,211","99,212"]</code>.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_cog_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a Cloud Optimized Geotiff (COG) TileLayer to the map.</span>

<span class="sd">    This method adds a COG TileLayer to the map. The COG TileLayer is created</span>
<span class="sd">    from the specified URL, and it is added to the map with the specified name,</span>
<span class="sd">    attribution, opacity, visibility, and bands.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the COG tile layer.</span>
<span class="sd">        name (str, optional): The name to use for the layer. If None, a</span>
<span class="sd">            random name is generated. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by default.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        bands (list, optional): A list of bands to use for the layer.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        nodata (float, optional): The nodata value to use for the layer.</span>
<span class="sd">        titiler_endpoint (str, optional): The endpoint of the titiler service.</span>
<span class="sd">            Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of</span>
<span class="sd">            the map to fit the bounds of the layer. Defaults to True.</span>
<span class="sd">        **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">            nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">                colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">            and https://cogeotiff.github.io/rio-tiler/colormap/.</span>
<span class="sd">                To select a certain bands, use bidx=[1, 2, 3]. apply a</span>
<span class="sd">                    rescaling to multiple bands, use something like</span>
<span class="sd">                    `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;COG_&quot;</span> <span class="o">+</span> <span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">()</span>

    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_tile</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">visible</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_colorbar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label_weight</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">tick_size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_colorbar" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a colorbar to the map.</p>
<p>This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using
the Map.add_html() method. The colorbar can be customized in various ways including its size, color palette,
label, and orientation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>width</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>Width of the colorbar in inches. Defaults to 3.0.</p></td>
        <td><code>3.0</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>Height of the colorbar in inches. Defaults to 0.2.</p></td>
        <td><code>0.2</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>Minimum value of the colorbar. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>Maximum value of the colorbar. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>List of colors or a colormap name for the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>Optional[Dict[str, Union[str, float, int]]]</code></td>
        <td><p>Visualization parameters as a dictionary.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Matplotlib colormap name. Defaults to "gray".</p></td>
        <td><code>&#39;gray&#39;</code></td>
      </tr>
      <tr>
        <td><code>discrete</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Whether to create a discrete colorbar. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>label</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Label for the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>label_size</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>Font size for the colorbar label. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>label_weight</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Font weight for the colorbar label. Defaults to "normal".</p></td>
        <td><code>&#39;normal&#39;</code></td>
      </tr>
      <tr>
        <td><code>tick_size</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>Font size for the colorbar tick labels. Defaults to 8.</p></td>
        <td><code>8</code></td>
      </tr>
      <tr>
        <td><code>bg_color</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Background color for the colorbar. Defaults to "white".</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>orientation</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Orientation of the colorbar ("vertical" or "horizontal"). Defaults to "horizontal".</p></td>
        <td><code>&#39;horizontal&#39;</code></td>
      </tr>
      <tr>
        <td><code>dpi</code></td>
        <td><code>Optional[Union[str, float]]</code></td>
        <td><p>Resolution in dots per inch. If 'figure', uses the figure's dpi value. Defaults to "figure".</p></td>
        <td><code>&#39;figure&#39;</code></td>
      </tr>
      <tr>
        <td><code>transparent</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Whether the background is transparent. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the colorbar on the map. Defaults to "bottom-right".</p></td>
        <td><code>&#39;bottom-right&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments passed to matplotlib.pyplot.savefig().</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Path to the generated colorbar image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">vmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">vmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">palette</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">discrete</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">label_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="n">tick_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">orientation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">dpi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span>
    <span class="n">transparent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a colorbar to the map.</span>

<span class="sd">    This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using</span>
<span class="sd">    the Map.add_html() method. The colorbar can be customized in various ways including its size, color palette,</span>
<span class="sd">    label, and orientation.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (Optional[float]): Width of the colorbar in inches. Defaults to 3.0.</span>
<span class="sd">        height (Optional[float]): Height of the colorbar in inches. Defaults to 0.2.</span>
<span class="sd">        vmin (Optional[float]): Minimum value of the colorbar. Defaults to 0.</span>
<span class="sd">        vmax (Optional[float]): Maximum value of the colorbar. Defaults to 1.0.</span>
<span class="sd">        palette (Optional[List[str]]): List of colors or a colormap name for the colorbar. Defaults to None.</span>
<span class="sd">        vis_params (Optional[Dict[str, Union[str, float, int]]]): Visualization parameters as a dictionary.</span>
<span class="sd">        cmap (Optional[str]): Matplotlib colormap name. Defaults to &quot;gray&quot;.</span>
<span class="sd">        discrete (Optional[bool]): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">        label (Optional[str]): Label for the colorbar. Defaults to None.</span>
<span class="sd">        label_size (Optional[int]): Font size for the colorbar label. Defaults to 10.</span>
<span class="sd">        label_weight (Optional[str]): Font weight for the colorbar label. Defaults to &quot;normal&quot;.</span>
<span class="sd">        tick_size (Optional[int]): Font size for the colorbar tick labels. Defaults to 8.</span>
<span class="sd">        bg_color (Optional[str]): Background color for the colorbar. Defaults to &quot;white&quot;.</span>
<span class="sd">        orientation (Optional[str]): Orientation of the colorbar (&quot;vertical&quot; or &quot;horizontal&quot;). Defaults to &quot;horizontal&quot;.</span>
<span class="sd">        dpi (Optional[Union[str, float]]): Resolution in dots per inch. If &#39;figure&#39;, uses the figure&#39;s dpi value. Defaults to &quot;figure&quot;.</span>
<span class="sd">        transparent (Optional[bool]): Whether the background is transparent. Defaults to False.</span>
<span class="sd">        position (str): Position of the colorbar on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments passed to matplotlib.pyplot.savefig().</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Path to the generated colorbar image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
        <span class="n">bg_color</span> <span class="o">=</span> <span class="s2">&quot;transparent&quot;</span>

    <span class="n">colorbar</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">save_colorbar</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="p">,</span>
        <span class="n">height</span><span class="p">,</span>
        <span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">,</span>
        <span class="n">label</span><span class="p">,</span>
        <span class="n">label_size</span><span class="p">,</span>
        <span class="n">label_weight</span><span class="p">,</span>
        <span class="n">tick_size</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">,</span>
        <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">colorbar</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a control to the map.</p>
<p>This method adds a control to the map. The control can be one of the
    following: 'scale', 'fullscreen', 'geolocate', 'navigation', "attribution",
    and "draw". If the control is a string, it is converted to the
    corresponding control object. If the control is not a string, it is
    assumed to be a control object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>control</code></td>
        <td><code>str or object</code></td>
        <td><p>The control to add to the map. Can be one
of the following: 'scale', 'fullscreen', 'geolocate', 'navigation',
 "attribution", and "draw".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the control. Defaults to "top-right".</p></td>
        <td><code>&#39;top-right&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the control object.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the control is a string and is not one of the
following: 'scale', 'fullscreen', 'geolocate', 'navigation', "attribution".</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a control to the map.</span>

<span class="sd">    This method adds a control to the map. The control can be one of the</span>
<span class="sd">        following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;,</span>
<span class="sd">        and &quot;draw&quot;. If the control is a string, it is converted to the</span>
<span class="sd">        corresponding control object. If the control is not a string, it is</span>
<span class="sd">        assumed to be a control object.</span>

<span class="sd">    Args:</span>
<span class="sd">        control (str or object): The control to add to the map. Can be one</span>
<span class="sd">            of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;,</span>
<span class="sd">             &quot;attribution&quot;, and &quot;draw&quot;.</span>
<span class="sd">        position (str, optional): The position of the control. Defaults to &quot;top-right&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the control object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the control is a string and is not one of the</span>
<span class="sd">            following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">control</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">ScaleControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">FullscreenControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;geolocate&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">GeolocateControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;navigation&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">NavigationControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;attribution&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">AttributionControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;draw&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;layers&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Control can only be one of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, and &#39;draw&#39;.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_deck_layers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_deck_layers" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add Deck.GL layers to the layer stack</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layers</code></td>
        <td><code>list[dict]</code></td>
        <td><p>A list of dictionaries containing the Deck.GL layers to be added.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tooltip</code></td>
        <td><code>str | dict</code></td>
        <td><p>Either a single mustache template string applied to all layers
or a dictionary where keys are layer ids and values are mustache template strings.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">tooltip</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add Deck.GL layers to the layer stack</span>

<span class="sd">    Args:</span>
<span class="sd">        layers (list[dict]): A list of dictionaries containing the Deck.GL layers to be added.</span>
<span class="sd">        tooltip (str | dict): Either a single mustache template string applied to all layers</span>
<span class="sd">            or a dictionary where keys are layer ids and values are mustache template strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@@type&quot;</span><span class="p">,</span> <span class="s2">&quot;deck&quot;</span><span class="p">),</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;getFillColor&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">),</span>
        <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_draw_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-left&#39;</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_draw_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a drawing control to the map.</p>
<p>This method enables users to add interactive drawing controls to the map,
allowing for the creation, editing, and deletion of geometric shapes on
the map. The options, position, and initial GeoJSON can be customized.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>options</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Configuration options for the
drawing control. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>controls</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The drawing controls to enable.
Can be one or more of the following: 'polygon', 'line_string',
'point', 'trash', 'combine_features', 'uncombine_features'.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the control on the map. Defaults
to "top-left".</p></td>
        <td><code>&#39;top-left&#39;</code></td>
      </tr>
      <tr>
        <td><code>geojson</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Initial GeoJSON data to load
into the drawing control. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to be passed to the
drawing control.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_draw_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
    <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a drawing control to the map.</span>

<span class="sd">    This method enables users to add interactive drawing controls to the map,</span>
<span class="sd">    allowing for the creation, editing, and deletion of geometric shapes on</span>
<span class="sd">    the map. The options, position, and initial GeoJSON can be customized.</span>

<span class="sd">    Args:</span>
<span class="sd">        options (Optional[Dict[str, Any]]): Configuration options for the</span>
<span class="sd">            drawing control. Defaults to None.</span>
<span class="sd">        controls (Optional[Dict[str, Any]]): The drawing controls to enable.</span>
<span class="sd">            Can be one or more of the following: &#39;polygon&#39;, &#39;line_string&#39;,</span>
<span class="sd">            &#39;point&#39;, &#39;trash&#39;, &#39;combine_features&#39;, &#39;uncombine_features&#39;.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        position (str): The position of the control on the map. Defaults</span>
<span class="sd">            to &quot;top-left&quot;.</span>
<span class="sd">        geojson (Optional[Dict[str, Any]]): Initial GeoJSON data to load</span>
<span class="sd">            into the drawing control. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to be passed to the</span>
<span class="sd">            drawing control.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">maplibre.plugins</span> <span class="kn">import</span> <span class="n">MapboxDrawControls</span><span class="p">,</span> <span class="n">MapboxDrawOptions</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;polygon&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;line_string&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;line_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;trash&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;trash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;combine_features&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;combine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;uncombine_features&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;uncombine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">options</span> <span class="o">=</span> <span class="n">MapboxDrawOptions</span><span class="p">(</span>
            <span class="n">display_controls_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">controls</span><span class="o">=</span><span class="n">MapboxDrawControls</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_mapbox_draw</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_ee_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">asset_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;Google Earth Engine&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ee_initialize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_ee_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a Google Earth Engine tile layer to the map based on the tile layer URL from
    https://github.com/opengeos/ee-tile-layers/blob/main/datasets.tsv.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The Earth Engine object to display.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters. For example, {'min': 0, 'max': 100}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>asset_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of the Earth Engine asset.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the tile layer. If not provided,
the asset ID will be used. Default is None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the tile layer (0 to 1).
Default is 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution text to be displayed.
Default is "Google Earth Engine".</p></td>
        <td><code>&#39;Google Earth Engine&#39;</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the tile layer should be shown on
the map. Default is True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>ee_initialize</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to initialize the Earth Engine</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments to be passed to the underlying
<code>add_tile_layer</code> method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">asset_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Google Earth Engine&quot;</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ee_initialize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a Google Earth Engine tile layer to the map based on the tile layer URL from</span>
<span class="sd">        https://github.com/opengeos/ee-tile-layers/blob/main/datasets.tsv.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The Earth Engine object to display.</span>
<span class="sd">        vis_params (dict): Visualization parameters. For example, {&#39;min&#39;: 0, &#39;max&#39;: 100}.</span>
<span class="sd">        asset_id (str): The ID of the Earth Engine asset.</span>
<span class="sd">        name (str, optional): The name of the tile layer. If not provided,</span>
<span class="sd">            the asset ID will be used. Default is None.</span>
<span class="sd">        opacity (float, optional): The opacity of the tile layer (0 to 1).</span>
<span class="sd">            Default is 1.</span>
<span class="sd">        attribution (str, optional): The attribution text to be displayed.</span>
<span class="sd">            Default is &quot;Google Earth Engine&quot;.</span>
<span class="sd">        visible (bool, optional): Whether the tile layer should be shown on</span>
<span class="sd">            the map. Default is True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        ee_initialize (bool, optional): Whether to initialize the Earth Engine</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the underlying</span>
<span class="sd">            `add_tile_layer` method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">asset_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
            <span class="s2">&quot;https://raw.githubusercontent.com/opengeos/ee-tile-layers/main/datasets.tsv&quot;</span><span class="p">,</span>
            <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">asset_id</span>

        <span class="k">if</span> <span class="n">asset_id</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">asset_id</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                <span class="n">url</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The provided EE tile layer </span><span class="si">{</span><span class="n">asset_id</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ee_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">geemap</span>
            <span class="kn">from</span> <span class="nn">geemap.ee_tile_layers</span> <span class="kn">import</span> <span class="n">_get_tile_url_format</span>

            <span class="k">if</span> <span class="n">ee_initialize</span><span class="p">:</span>
                <span class="n">geemap</span><span class="o">.</span><span class="n">ee_initialize</span><span class="p">()</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">_get_tile_url_format</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;EE Layer&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                <span class="n">url</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Please install the `geemap` package to use the `add_ee_layer` function.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_gdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gdf</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_gdf" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a vector layer to the map.</p>
<p>This method adds a GeoDataFrame to the map as a vector layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>gpd.GeoDataFrame</code></td>
        <td><p>The GeoDataFrame to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of the layer. If None, the type
is inferred from the GeoJSON data.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>filter</code></td>
        <td><code>dict</code></td>
        <td><p>The filter to apply to the layer. If None,
no filter is applied.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>paint</code></td>
        <td><code>dict</code></td>
        <td><p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. If None, a random name
is generated.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is visible or not.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>source_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the Layer class.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the data is not a URL or a GeoJSON dictionary.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_gdf</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">gdf</span><span class="p">:</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a vector layer to the map.</span>

<span class="sd">    This method adds a GeoDataFrame to the map as a vector layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (gpd.GeoDataFrame): The GeoDataFrame to add to the map.</span>
<span class="sd">        layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">            is inferred from the GeoJSON data.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a GeoDataFrame.&quot;</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
        <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_geojson" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a GeoJSON layer to the map.</p>
<p>This method adds a GeoJSON layer to the map. The GeoJSON data can be a
URL to a GeoJSON file or a GeoJSON dictionary. If a name is provided, it
is used as the key to store the layer in the layer dictionary. Otherwise,
a random name is generated.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | dict</code></td>
        <td><p>The GeoJSON data. This can be a URL to a GeoJSON
file or a GeoJSON dictionary.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of the layer. It can be one of
the following: 'circle', 'fill', 'fill-extrusion', 'line', 'symbol',
'raster', 'background', 'heatmap', 'hillshade'. If None, the type
is inferred from the GeoJSON data.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>filter</code></td>
        <td><code>dict</code></td>
        <td><p>The filter to apply to the layer. If None,
no filter is applied.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>paint</code></td>
        <td><code>dict</code></td>
        <td><p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. If None, a random name
is generated.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is visible or not.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>source_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the Layer class.
See https://maplibre.org/maplibre-style-spec/layers/ for more info.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the data is not a URL or a GeoJSON dictionary.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a GeoJSON layer to the map.</span>

<span class="sd">    This method adds a GeoJSON layer to the map. The GeoJSON data can be a</span>
<span class="sd">    URL to a GeoJSON file or a GeoJSON dictionary. If a name is provided, it</span>
<span class="sd">    is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">    a random name is generated.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | dict): The GeoJSON data. This can be a URL to a GeoJSON</span>
<span class="sd">            file or a GeoJSON dictionary.</span>
<span class="sd">        layer_type (str, optional): The type of the layer. It can be one of</span>
<span class="sd">            the following: &#39;circle&#39;, &#39;fill&#39;, &#39;fill-extrusion&#39;, &#39;line&#39;, &#39;symbol&#39;,</span>
<span class="sd">            &#39;raster&#39;, &#39;background&#39;, &#39;heatmap&#39;, &#39;hillshade&#39;. If None, the type</span>
<span class="sd">            is inferred from the GeoJSON data.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://maplibre.org/maplibre-style-spec/layers/ for more info.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">geom_type</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="s2">&quot;geojson&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;geojson_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>
    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;features&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPoint&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;LineString&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                    <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="p">}</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">paint</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fit_bounds</span> <span class="ow">and</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paint</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span> <span class="ow">in</span> <span class="n">paint</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_gps_trace" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_gps_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">circle_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;#ffffff&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;GPS Trace&#39;</span><span class="p">,</span> <span class="n">add_line</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sort_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_gps_trace" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a GPS trace to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Union[str, List[Dict[str, Any]]]</code></td>
        <td><p>The GPS trace data. It can be a GeoJSON file path or a list of coordinates.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the x coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the y coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>columns</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>The list of columns to include in the GeoDataFrame. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colormap</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>The colormap for the GPS trace. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>radius</code></td>
        <td><code>int</code></td>
        <td><p>The radius of the GPS trace points. Defaults to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>circle_color</code></td>
        <td><code>Optional[Union[str, List[Any]]]</code></td>
        <td><p>The color of the GPS trace points. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>stroke_color</code></td>
        <td><code>str</code></td>
        <td><p>The stroke color of the GPS trace points. Defaults to "#ffffff".</p></td>
        <td><code>&#39;#ffffff&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the GPS trace points. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>paint</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The paint properties for the GPS trace points. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the GPS trace layer. Defaults to "GPS Trace".</p></td>
        <td><code>&#39;GPS Trace&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_line</code></td>
        <td><code>bool</code></td>
        <td><p>If True, adds a line connecting the GPS trace points. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>sort_column</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The column name to sort the points before connecting them as a line. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>line_args</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Additional arguments for the line layer. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the add_geojson method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_gps_trace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">color_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">circle_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GPS Trace&quot;</span><span class="p">,</span>
    <span class="n">add_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sort_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">line_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a GPS trace to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (Union[str, List[Dict[str, Any]]]): The GPS trace data. It can be a GeoJSON file path or a list of coordinates.</span>
<span class="sd">        x (str, optional): The column name for the x coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        y (str, optional): The column name for the y coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        columns (Optional[List[str]], optional): The list of columns to include in the GeoDataFrame. Defaults to None.</span>
<span class="sd">        colormap (Optional[Dict[str, str]], optional): The colormap for the GPS trace. Defaults to None.</span>
<span class="sd">        radius (int, optional): The radius of the GPS trace points. Defaults to 5.</span>
<span class="sd">        circle_color (Optional[Union[str, List[Any]]], optional): The color of the GPS trace points. Defaults to None.</span>
<span class="sd">        stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;#ffffff&quot;.</span>
<span class="sd">        opacity (float, optional): The opacity of the GPS trace points. Defaults to 1.0.</span>
<span class="sd">        paint (Optional[Dict[str, Any]], optional): The paint properties for the GPS trace points. Defaults to None.</span>
<span class="sd">        name (str, optional): The name of the GPS trace layer. Defaults to &quot;GPS Trace&quot;.</span>
<span class="sd">        add_line (bool, optional): If True, adds a line connecting the GPS trace points. Defaults to False.</span>
<span class="sd">        sort_column (Optional[str], optional): The column name to sort the points before connecting them as a line. Defaults to None.</span>
<span class="sd">        line_args (Optional[Dict[str, Any]], optional): Additional arguments for the line layer. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid data type. Use a GeoDataFrame or a list of coordinates.&quot;</span>
        <span class="p">)</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gps_trace&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_line</span><span class="p">:</span>
        <span class="n">line_gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">connect_points_as_line</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">sort_column</span><span class="o">=</span><span class="n">sort_column</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">line_gdf</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;doorstep&quot;</span><span class="p">:</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">,</span>  <span class="c1"># Red</span>
            <span class="s2">&quot;indoor&quot;</span><span class="p">:</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">,</span>  <span class="c1"># Blue</span>
            <span class="s2">&quot;outdoor&quot;</span><span class="p">:</span> <span class="s2">&quot;#00FF00&quot;</span><span class="p">,</span>  <span class="c1"># Green</span>
            <span class="s2">&quot;parked&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>  <span class="c1"># Yellow</span>
            <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFF00&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;annotation&quot;</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">color_column</span> <span class="o">=</span> <span class="s2">&quot;category&quot;</span>
            <span class="n">gdf</span><span class="p">[</span><span class="n">color_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
                <span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
                <span class="s2">&quot;annotation&quot;</span><span class="p">,</span>
                <span class="n">color_column</span><span class="p">,</span>
                <span class="s2">&quot;geometry&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gdf&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">circle_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">circle_color</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;match&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">color_column</span><span class="p">],</span>
                    <span class="s2">&quot;doorstep&quot;</span><span class="p">,</span>
                    <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;doorstep&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;indoor&quot;</span><span class="p">,</span>
                    <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;indoor&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;outdoor&quot;</span><span class="p">,</span>
                    <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;outdoor&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;parked&quot;</span><span class="p">,</span>
                    <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;parked&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;selected&quot;</span><span class="p">,</span>
                    <span class="n">colormap</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;#CCCCCC&quot;</span><span class="p">,</span>  <span class="c1"># Default color if annotation does not match</span>
                <span class="p">]</span>

    <span class="k">if</span> <span class="n">circle_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circle_color</span> <span class="o">=</span> <span class="s2">&quot;#3388ff&quot;</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="n">radius</span><span class="p">,</span>
            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="n">circle_color</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="n">stroke_color</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="n">line_gdf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span><span class="n">line_gdf</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;GPS Trace Line&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">line_args</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_html" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add HTML content to the map.</p>
<p>This method allows for the addition of arbitrary HTML content to the map, which can be used to display
custom information or controls. The background color and position of the HTML content can be customized.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>html</code></td>
        <td><code>str</code></td>
        <td><p>The HTML content to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bg_color</code></td>
        <td><code>str</code></td>
        <td><p>The background color of the HTML content. Defaults to "white".
To make the background transparent, set this to "transparent".
To make the background half transparent, set this to "rgba(255, 255, 255, 0.5)".</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the HTML content on the map. Can be one of "top-left",
"top-right", "bottom-left", "bottom-right". Defaults to "bottom-right".</p></td>
        <td><code>&#39;bottom-right&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Union[str, int, float]</code></td>
        <td><p>Additional keyword arguments for future use.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_html</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add HTML content to the map.</span>

<span class="sd">    This method allows for the addition of arbitrary HTML content to the map, which can be used to display</span>
<span class="sd">    custom information or controls. The background color and position of the HTML content can be customized.</span>

<span class="sd">    Args:</span>
<span class="sd">        html (str): The HTML content to add.</span>
<span class="sd">        bg_color (str, optional): The background color of the HTML content. Defaults to &quot;white&quot;.</span>
<span class="sd">            To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">            To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">        position (str, optional): The position of the HTML content on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">            &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if an HTML string contains local images and convert them to base64.</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_html_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">icon_size</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_image" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add an image to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>The layer ID of the image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>image</code></td>
        <td><code>Union[str, Dict, np.ndarray]</code></td>
        <td><p>The URL or local file path to
the image, or a dictionary containing image data, or a numpy
array representing the image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>The width of the image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>The height of the image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>coordinates</code></td>
        <td><code>List[float]</code></td>
        <td><p>The longitude and latitude
coordinates to place the image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the image. Defaults to None.
Can be one of 'top-right', 'top-left', 'bottom-right', 'bottom-left'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>icon_size</code></td>
        <td><code>float</code></td>
        <td><p>The size of the icon. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">icon_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The layer ID of the image.</span>
<span class="sd">        image (Union[str, Dict, np.ndarray]): The URL or local file path to</span>
<span class="sd">            the image, or a dictionary containing image data, or a numpy</span>
<span class="sd">            array representing the image.</span>
<span class="sd">        width (int, optional): The width of the image. Defaults to None.</span>
<span class="sd">        height (int, optional): The height of the image. Defaults to None.</span>
<span class="sd">        coordinates (List[float], optional): The longitude and latitude</span>
<span class="sd">            coordinates to place the image.</span>
<span class="sd">        position (str, optional): The position of the image. Defaults to None.</span>
<span class="sd">            Can be one of &#39;top-right&#39;, &#39;top-left&#39;, &#39;bottom-right&#39;, &#39;bottom-left&#39;.</span>
<span class="sd">        icon_size (float, optional): The size of the icon. Defaults to 1.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

    <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>

    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px; &quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; &quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px; &quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; &quot;</span>

    <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot; style=&quot;</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">image_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">image_dict</span> <span class="o">=</span> <span class="n">image</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">image_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The image must be a URL, a local file path, or a numpy array.&quot;</span>
            <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;addImage&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">image_dict</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">coordinates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
                <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
                            <span class="p">},</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                <span class="p">},</span>
            <span class="p">}</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;image_point&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_points&quot;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;symbol&quot;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_point&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">icon_size</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a layer to the map.</p>
<p>This method adds a layer to the map. If a name is provided, it is used
    as the key to store the layer in the layer dictionary. Otherwise,
    the layer's ID is used as the key. If a before_id is provided, the
    layer is inserted before the layer with that ID.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layer</code></td>
        <td><code>Layer</code></td>
        <td><p>The layer object to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to use as the key to store the layer
in the layer dictionary. If None, the layer's ID is used as the key.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is visible by default.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer</span><span class="p">:</span> <span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a layer to the map.</span>

<span class="sd">    This method adds a layer to the map. If a name is provided, it is used</span>
<span class="sd">        as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">        the layer&#39;s ID is used as the key. If a before_id is provided, the</span>
<span class="sd">        layer is inserted before the layer with that ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer (Layer): The layer object to add to the map.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        name (str, optional): The name to use as the key to store the layer</span>
<span class="sd">            in the layer dictionary. If None, the layer&#39;s ID is used as the key.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible by default.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;minzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;min-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;minzoom&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;maxzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;max-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_top_level_hyphens</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">layer</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">id</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">paint</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
        <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
        <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">visible</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_layer_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">css_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-left&#39;</span><span class="p">,</span> <span class="n">bg_layers</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_layer_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a layer control to the map.</p>
<p>This function creates and adds a layer switcher control to the map, allowing users to toggle the visibility
of specified layers. The appearance and functionality of the layer control can be customized with parameters
such as theme, CSS styling, and position on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layer_ids</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>A list of layer IDs to include in the control. If None, all layers
in the map will be included. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>theme</code></td>
        <td><code>str</code></td>
        <td><p>The theme for the layer switcher control. Can be "default" or other custom themes. Defaults to "default".</p></td>
        <td><code>&#39;default&#39;</code></td>
      </tr>
      <tr>
        <td><code>css_text</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Custom CSS text for styling the layer control. If None, a default style will be applied.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the layer control on the map. Can be "top-left", "top-right", "bottom-left",
or "bottom-right". Defaults to "top-left".</p></td>
        <td><code>&#39;top-left&#39;</code></td>
      </tr>
      <tr>
        <td><code>bg_layers</code></td>
        <td><code>bool</code></td>
        <td><p>If True, background layers will be included in the control. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">css_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
    <span class="n">bg_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a layer control to the map.</span>

<span class="sd">    This function creates and adds a layer switcher control to the map, allowing users to toggle the visibility</span>
<span class="sd">    of specified layers. The appearance and functionality of the layer control can be customized with parameters</span>
<span class="sd">    such as theme, CSS styling, and position on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_ids (Optional[List[str]]): A list of layer IDs to include in the control. If None, all layers</span>
<span class="sd">            in the map will be included. Defaults to None.</span>
<span class="sd">        theme (str): The theme for the layer switcher control. Can be &quot;default&quot; or other custom themes. Defaults to &quot;default&quot;.</span>
<span class="sd">        css_text (Optional[str]): Custom CSS text for styling the layer control. If None, a default style will be applied.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        position (str): The position of the layer control on the map. Can be &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;,</span>
<span class="sd">            or &quot;bottom-right&quot;. Defaults to &quot;top-left&quot;.</span>
<span class="sd">        bg_layers (bool): If True, background layers will be included in the control. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">LayerSwitcherControl</span>

    <span class="k">if</span> <span class="n">layer_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bg_layers</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">bg_layers</span> <span class="o">+</span> <span class="n">layer_ids</span>
    <span class="k">elif</span> <span class="n">bg_layers</span><span class="p">:</span>
        <span class="n">background_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">background_ids</span> <span class="o">+</span> <span class="n">layer_ids</span>

    <span class="k">if</span> <span class="n">css_text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">css_text</span> <span class="o">=</span> <span class="s2">&quot;padding: 5px; border: 1px solid darkgrey; border-radius: 4px;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">LayerSwitcherControl</span><span class="p">(</span>
            <span class="n">layer_ids</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="n">theme</span><span class="p">,</span>
            <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_legend" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape_type</span><span class="o">=</span><span class="s1">&#39;rectangle&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_legend" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a legend to the map.</p>
<p>This method allows for the addition of a legend to the map. The legend can be customized with a title,
labels, colors, and more. A built-in legend can also be specified.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>The title of the legend. Defaults to "Legend".</p></td>
        <td><code>&#39;Legend&#39;</code></td>
      </tr>
      <tr>
        <td><code>legend_dict</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>A dictionary with legend items as keys and colors as values.
If provided, <code>labels</code> and <code>colors</code> will be ignored. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>A list of legend labels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>A list of colors corresponding to the labels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fontsize</code></td>
        <td><code>int</code></td>
        <td><p>The font size of the legend text. Defaults to 15.</p></td>
        <td><code>15</code></td>
      </tr>
      <tr>
        <td><code>bg_color</code></td>
        <td><code>str</code></td>
        <td><p>The background color of the legend. Defaults to "white".
To make the background transparent, set this to "transparent".
To make the background half transparent, set this to "rgba(255, 255, 255, 0.5)".</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the legend on the map. Can be one of "top-left",
"top-right", "bottom-left", "bottom-right". Defaults to "bottom-right".</p></td>
        <td><code>&#39;bottom-right&#39;</code></td>
      </tr>
      <tr>
        <td><code>builtin_legend</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of a built-in legend to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shape_type</code></td>
        <td><code>str</code></td>
        <td><p>The shape type of the legend items. Can be one of "rectangle", "circle", or "line".</p></td>
        <td><code>&#39;rectangle&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Union[str, int, float]</code></td>
        <td><p>Additional keyword arguments for future use.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a legend to the map.</span>

<span class="sd">    This method allows for the addition of a legend to the map. The legend can be customized with a title,</span>
<span class="sd">    labels, colors, and more. A built-in legend can also be specified.</span>

<span class="sd">    Args:</span>
<span class="sd">        title (str, optional): The title of the legend. Defaults to &quot;Legend&quot;.</span>
<span class="sd">        legend_dict (Optional[Dict[str, str]], optional): A dictionary with legend items as keys and colors as values.</span>
<span class="sd">            If provided, `labels` and `colors` will be ignored. Defaults to None.</span>
<span class="sd">        labels (Optional[List[str]], optional): A list of legend labels. Defaults to None.</span>
<span class="sd">        colors (Optional[List[str]], optional): A list of colors corresponding to the labels. Defaults to None.</span>
<span class="sd">        fontsize (int, optional): The font size of the legend text. Defaults to 15.</span>
<span class="sd">        bg_color (str, optional): The background color of the legend. Defaults to &quot;white&quot;.</span>
<span class="sd">            To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">            To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">        position (str, optional): The position of the legend on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">            &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        builtin_legend (Optional[str], optional): The name of a built-in legend to use. Defaults to None.</span>
<span class="sd">        shape_type (str, optional): The shape type of the legend items. Can be one of &quot;rectangle&quot;, &quot;circle&quot;, or &quot;line&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">importlib.resources</span>
    <span class="kn">from</span> <span class="nn">.legends</span> <span class="kn">import</span> <span class="n">builtin_legends</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">importlib</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s2">&quot;leafmap&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;leafmap.py&quot;</span><span class="p">)</span>
    <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/template/legend.html&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend template does not exist.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys must be a list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;One&quot;</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="s2">&quot;Three&quot;</span><span class="p">,</span> <span class="s2">&quot;Four&quot;</span><span class="p">,</span> <span class="s2">&quot;etc&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list of tuples.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys and values must be the same length.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend dict must be a dictionary.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
        <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The position must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">footer</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span>
        <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;      &lt;li&gt;&lt;span style=&#39;background:</span><span class="si">{}</span><span class="s2">;&#39;&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">color</span><span class="p">,</span> <span class="n">key</span>
        <span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">legend_html</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="n">footer</span>
    <span class="n">legend_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">legend_html</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;width: 30px&quot;</span><span class="p">,</span> <span class="s2">&quot;width: 16px&quot;</span><span class="p">)</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot;border: 1px solid #999;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;border-radius: 50%;</span><span class="se">\n</span><span class="s2">      border: 1px solid #999;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;height: 16px&quot;</span><span class="p">,</span> <span class="s2">&quot;height: 3px&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span>
        <span class="n">legend_text</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_marker" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lng_lat</span><span class="o">=</span><span class="p">[],</span> <span class="n">popup</span><span class="o">=</span><span class="p">{},</span> <span class="n">options</span><span class="o">=</span><span class="p">{})</span></code>


<a href="#leafmap.maplibregl.Map.add_marker" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a marker to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>marker</code></td>
        <td><code>Marker</code></td>
        <td><p>A Marker object. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>lng_lat</code></td>
        <td><code>List[Union[float, float]]</code></td>
        <td><p>A list of two floats
representing the longitude and latitude of the marker.</p></td>
        <td><code>[]</code></td>
      </tr>
      <tr>
        <td><code>popup</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The text to display in a popup when
the marker is clicked. Defaults to None.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>options</code></td>
        <td><code>Optional[Dict]</code></td>
        <td><p>A dictionary of options to
customize the marker. Defaults to None.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_marker</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">marker</span><span class="p">:</span> <span class="n">Marker</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">lng_lat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">popup</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a marker to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        marker (Marker, optional): A Marker object. Defaults to None.</span>
<span class="sd">        lng_lat (List[Union[float, float]]): A list of two floats</span>
<span class="sd">            representing the longitude and latitude of the marker.</span>
<span class="sd">        popup (Optional[str], optional): The text to display in a popup when</span>
<span class="sd">            the marker is clicked. Defaults to None.</span>
<span class="sd">        options (Optional[Dict], optional): A dictionary of options to</span>
<span class="sd">            customize the marker. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">lng_lat</span><span class="o">=</span><span class="n">lng_lat</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_nlcd" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_nlcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">years</span><span class="o">=</span><span class="p">[</span><span class="mi">2023</span><span class="p">],</span> <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_nlcd" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds National Land Cover Database (NLCD) data to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>years</code></td>
        <td><code>list</code></td>
        <td><p>A list of years to add. It can be any of 1985-2023. Defaults to [2023].</p></td>
        <td><code>[2023]</code></td>
      </tr>
      <tr>
        <td><code>add_legend</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add a legend to the map. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments to pass to the add_cog_layer method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_nlcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">years</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2023</span><span class="p">],</span> <span class="n">add_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds National Land Cover Database (NLCD) data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        years (list): A list of years to add. It can be any of 1985-2023. Defaults to [2023].</span>
<span class="sd">        add_legend (bool): Whether to add a legend to the map. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_cog_layer method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_years</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;https://s3-us-west-2.amazonaws.com/mrlc/Annual_NLCD_LndCov_</span><span class="si">{}</span><span class="s2">_CU_C1V0.tif&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;colormap&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;11&quot;</span><span class="p">:</span> <span class="s2">&quot;#466b9f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;12&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1def8&quot;</span><span class="p">,</span>
            <span class="s2">&quot;21&quot;</span><span class="p">:</span> <span class="s2">&quot;#dec5c5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;22&quot;</span><span class="p">:</span> <span class="s2">&quot;#d99282&quot;</span><span class="p">,</span>
            <span class="s2">&quot;23&quot;</span><span class="p">:</span> <span class="s2">&quot;#eb0000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;24&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab0000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;31&quot;</span><span class="p">:</span> <span class="s2">&quot;#b3ac9f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;41&quot;</span><span class="p">:</span> <span class="s2">&quot;#68ab5f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;42&quot;</span><span class="p">:</span> <span class="s2">&quot;#1c5f2c&quot;</span><span class="p">,</span>
            <span class="s2">&quot;43&quot;</span><span class="p">:</span> <span class="s2">&quot;#b5c58f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;51&quot;</span><span class="p">:</span> <span class="s2">&quot;#af963c&quot;</span><span class="p">,</span>
            <span class="s2">&quot;52&quot;</span><span class="p">:</span> <span class="s2">&quot;#ccb879&quot;</span><span class="p">,</span>
            <span class="s2">&quot;71&quot;</span><span class="p">:</span> <span class="s2">&quot;#dfdfc2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;72&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1d182&quot;</span><span class="p">,</span>
            <span class="s2">&quot;73&quot;</span><span class="p">:</span> <span class="s2">&quot;#a3cc51&quot;</span><span class="p">,</span>
            <span class="s2">&quot;74&quot;</span><span class="p">:</span> <span class="s2">&quot;#82ba9e&quot;</span><span class="p">,</span>
            <span class="s2">&quot;81&quot;</span><span class="p">:</span> <span class="s2">&quot;#dcd939&quot;</span><span class="p">,</span>
            <span class="s2">&quot;82&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab6c28&quot;</span><span class="p">,</span>
            <span class="s2">&quot;90&quot;</span><span class="p">:</span> <span class="s2">&quot;#b8d9eb&quot;</span><span class="p">,</span>
            <span class="s2">&quot;95&quot;</span><span class="p">:</span> <span class="s2">&quot;#6c9fb8&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="s2">&quot;zoom_to_layer&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom_to_layer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_years</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Year must be one of </span><span class="si">{</span><span class="n">allowed_years</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="n">year_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_cog_layer</span><span class="p">(</span><span class="n">year_url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;NLCD </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;NLCD Land Cover Type&quot;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="s2">&quot;NLCD&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_overture_3d_buildings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_overture_3d_buildings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s1">&#39;2024-10-23&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_overture_3d_buildings" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add 3D buildings from Overture Maps to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>release</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The release date of the Overture Maps data.
Defaults to "2024-10-23". For more info, see
https://github.com/OvertureMaps/overture-tiles.</p></td>
        <td><code>&#39;2024-10-23&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The style dictionary for
the buildings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>values</code></td>
        <td><code>Optional[List[int]]</code></td>
        <td><p>List of height values for
color interpolation. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>List of colors corresponding
to the height values. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the buildings layer is visible.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the buildings layer.
Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>tooltip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show tooltips on the buildings.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>template</code></td>
        <td><code>str</code></td>
        <td><p>The template for the tooltip. It can be
"simple" or "all". Defaults to "simple".</p></td>
        <td><code>&#39;simple&#39;</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to fit the map bounds to the
buildings layer. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the length of values and colors lists are not the same.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_overture_3d_buildings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">release</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;2024-10-23&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add 3D buildings from Overture Maps to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        release (Optional[str], optional): The release date of the Overture Maps data.</span>
<span class="sd">            Defaults to &quot;2024-10-23&quot;. For more info, see</span>
<span class="sd">            https://github.com/OvertureMaps/overture-tiles.</span>
<span class="sd">        style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">            the buildings. Defaults to None.</span>
<span class="sd">        values (Optional[List[int]], optional): List of height values for</span>
<span class="sd">            color interpolation. Defaults to None.</span>
<span class="sd">        colors (Optional[List[str]], optional): List of colors corresponding</span>
<span class="sd">            to the height values. Defaults to None.</span>
<span class="sd">        visible (bool, optional): Whether the buildings layer is visible.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the buildings layer.</span>
<span class="sd">            Defaults to 1.0.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the buildings.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        template (str, optional): The template for the tooltip. It can be</span>
<span class="sd">            &quot;simple&quot; or &quot;all&quot;. Defaults to &quot;simple&quot;.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">            buildings layer. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the length of values and colors lists are not the same.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

    <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;simple&quot;</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Name: {{@name}}&lt;br&gt;Subtype: {{subtype}}&lt;br&gt;Class: {{class}}&lt;br&gt;Height: {{height}}&quot;</span>
    <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>
        <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="mi">0</span><span class="p">,</span>
                    <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="p">]</span>
                        <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                        <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building-part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="mi">0</span><span class="p">,</span>
                    <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="p">]</span>
                        <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                        <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_overture_buildings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_overture_buildings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s1">&#39;2024-10-23&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_overture_buildings" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add Overture Maps data to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>release</code></td>
        <td><code>str</code></td>
        <td><p>The release date of the data. Defaults to
"2024-10-23". For more info, see https://github.com/OvertureMaps/overture-tiles</p></td>
        <td><code>&#39;2024-10-23&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The style dictionary for
the data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>type</code></td>
        <td><code>str</code></td>
        <td><p>The type of the data. It can be "line" or "fill".</p></td>
        <td><code>&#39;line&#39;</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the data layer is visible. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the data layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>tooltip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show tooltips on the data.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to fit the map bounds to the
data layer. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments for the paint properties.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_overture_buildings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;2024-10-23&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">            &quot;2024-10-23&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">        style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">            the data. Defaults to None.</span>
<span class="sd">        type (str, optional): The type of the data. It can be &quot;line&quot; or &quot;fill&quot;.</span>
<span class="sd">        visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">            data layer. Defaults to False.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the paint properties.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

    <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;line-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;line-width&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="s2">&quot;line-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;fill-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#6ea299&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;fill-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_overture_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_overture_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s1">&#39;2024-10-23&#39;</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;buildings&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_overture_data" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add Overture Maps data to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>release</code></td>
        <td><code>str</code></td>
        <td><p>The release date of the data. Defaults to
"2024-10-23". For more info, see https://github.com/OvertureMaps/overture-tiles</p></td>
        <td><code>&#39;2024-10-23&#39;</code></td>
      </tr>
      <tr>
        <td><code>theme</code></td>
        <td><code>str</code></td>
        <td><p>The theme of the data. It can be one of the following:
"addresses", "base", "buildings", "divisions", "places", "transportation".
Defaults to "buildings".</p></td>
        <td><code>&#39;buildings&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The style dictionary for
the data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the data layer is visible. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the data layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>tooltip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show tooltips on the data.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to fit the map bounds to the
data layer. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments for the add_pmtiles method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the theme is not one of the allowed themes.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_overture_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;2024-10-23&quot;</span><span class="p">,</span>
    <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">            &quot;2024-10-23&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">        theme (str, optional): The theme of the data. It can be one of the following:</span>
<span class="sd">            &quot;addresses&quot;, &quot;base&quot;, &quot;buildings&quot;, &quot;divisions&quot;, &quot;places&quot;, &quot;transportation&quot;.</span>
<span class="sd">            Defaults to &quot;buildings&quot;.</span>
<span class="sd">        style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">            the data. Defaults to None.</span>
<span class="sd">        visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">            data layer. Defaults to False.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the add_pmtiles method.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the theme is not one of the allowed themes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">allowed_themes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
        <span class="s2">&quot;base&quot;</span><span class="p">,</span>
        <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;places&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_themes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The theme must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_themes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">styles</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Address&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;address&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Infrastructure&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;infrastructure&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_cover&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_cover&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_use&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_use&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Water&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;buildings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#6ea299&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#fdfdb2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;divisions&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_area&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_area&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_boundary&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_boundary&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;places&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Place&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;places&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;place&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;transportation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Segment&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;segment&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Connector&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;connector&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.pmtiles&quot;</span>
    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">theme</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_pmtiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_pmtiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">exclude_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;PMTiles&#39;</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_pmtiles" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a PMTiles layer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the PMTiles file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>The CSS style to apply to the layer. Defaults to None.
See https://docs.mapbox.com/style-spec/reference/layers/ for more info.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer should be shown initially. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>exclude_mask</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to exclude the mask layer. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>tooltip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show tooltips on the layer. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>properties</code></td>
        <td><code>dict</code></td>
        <td><p>The properties to use for the tooltips. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>template</code></td>
        <td><code>str</code></td>
        <td><p>The template to use for the tooltips. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use for the layer. Defaults to 'PMTiles'.</p></td>
        <td><code>&#39;PMTiles&#39;</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to zoom to the layer extent. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the PMTilesLayer constructor.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_pmtiles</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">exclude_mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;PMTiles&quot;</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a PMTiles layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the PMTiles file.</span>
<span class="sd">        style (dict, optional): The CSS style to apply to the layer. Defaults to None.</span>
<span class="sd">            See https://docs.mapbox.com/style-spec/reference/layers/ for more info.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be shown initially. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        exclude_mask (bool, optional): Whether to exclude the mask layer. Defaults to False.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the layer. Defaults to True.</span>
<span class="sd">        properties (dict, optional): The properties to use for the tooltips. Defaults to None.</span>
<span class="sd">        template (str, optional): The template to use for the tooltips. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer. Defaults to &#39;PMTiles&#39;.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to zoom to the layer extent. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the PMTilesLayer constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>

        <span class="n">pmtiles_source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;pmtiles://</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="n">attribution</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_style</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">style</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">pmtiles_source</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_hyphens_in_keys</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]:</span>

            <span class="k">if</span> <span class="n">exclude_mask</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source_layer&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mask&quot;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">visible</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">])</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">opacity</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">tooltip</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tooltip</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_metadata</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>  <span class="c1"># [minx, miny, maxx, maxy]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_raster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;Localtileserver&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Raster&#39;</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cors_all&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_raster" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a local raster dataset to the map.
    If you are using this function in JupyterHub on a remote server
    (e.g., Binder, Microsoft Planetary Computer) and if the raster
    does not render properly, try installing jupyter-server-proxy using
    <code>pip install jupyter-server-proxy</code>, then running the following code
    before calling this function. For more info, see https://bit.ly/3JbmF93.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>import os
os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;
</code></pre></div></td></tr></table></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>The path to the GeoTIFF file or the URL of the Cloud
Optimized GeoTIFF.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>indexes</code></td>
        <td><code>int</code></td>
        <td><p>The band(s) to use. Band indexing starts
at 1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colormap</code></td>
        <td><code>str</code></td>
        <td><p>The name of the colormap from <code>matplotlib</code>
to use when plotting a single band.
See https://matplotlib.org/stable/gallery/color/colormap_reference.html.
Default is greyscale.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value to use when colormapping
the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value to use when colormapping
the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The value from the band to use to interpret
as not valid data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>Attribution for the source raster. This
defaults to a message about it being a local file.. Defaults to None.</p></td>
        <td><code>&#39;Localtileserver&#39;</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to 'Raster'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_index</code></td>
        <td><code>int</code></td>
        <td><p>The index of the layer. Defaults to None.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom_to_layer</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to zoom to the extent of the
layer. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is visible. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>array_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional arguments to pass to
<code>array_to_memory_file</code> when reading the raster. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>client_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional arguments to pass to
localtileserver.TileClient. Defaults to { "cors_all": False }.</p></td>
        <td><code>{&#39;cors_all&#39;: True}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">,</span>
    <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Localtileserver&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Raster&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;cors_all&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a local raster dataset to the map.</span>
<span class="sd">        If you are using this function in JupyterHub on a remote server</span>
<span class="sd">        (e.g., Binder, Microsoft Planetary Computer) and if the raster</span>
<span class="sd">        does not render properly, try installing jupyter-server-proxy using</span>
<span class="sd">        `pip install jupyter-server-proxy`, then running the following code</span>
<span class="sd">        before calling this function. For more info, see https://bit.ly/3JbmF93.</span>

<span class="sd">        import os</span>
<span class="sd">        os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): The path to the GeoTIFF file or the URL of the Cloud</span>
<span class="sd">            Optimized GeoTIFF.</span>
<span class="sd">        indexes (int, optional): The band(s) to use. Band indexing starts</span>
<span class="sd">            at 1. Defaults to None.</span>
<span class="sd">        colormap (str, optional): The name of the colormap from `matplotlib`</span>
<span class="sd">            to use when plotting a single band.</span>
<span class="sd">            See https://matplotlib.org/stable/gallery/color/colormap_reference.html.</span>
<span class="sd">            Default is greyscale.</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping</span>
<span class="sd">            the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping</span>
<span class="sd">            the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret</span>
<span class="sd">            as not valid data. Defaults to None.</span>
<span class="sd">        attribution (str, optional): Attribution for the source raster. This</span>
<span class="sd">            defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to &#39;Raster&#39;.</span>
<span class="sd">        layer_index (int, optional): The index of the layer. Defaults to None.</span>
<span class="sd">        zoom_to_layer (bool, optional): Whether to zoom to the extent of the</span>
<span class="sd">            layer. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        array_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">            `array_to_memory_file` when reading the raster. Defaults to {}.</span>
<span class="sd">        client_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">            localtileserver.TileClient. Defaults to { &quot;cors_all&quot;: False }.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">array_to_image</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">array_args</span><span class="p">)</span>

    <span class="n">tile_layer</span><span class="p">,</span> <span class="n">tile_client</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_local_tile_layer</span><span class="p">(</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span>
        <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">client_args</span><span class="o">=</span><span class="n">client_args</span><span class="p">,</span>
        <span class="n">return_client</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">tile_layer</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>  <span class="c1"># [ymin, ymax, xmin, xmax]</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
    <span class="c1"># [minx, miny, maxx, maxy]</span>
    <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_source" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_source" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a source to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of the source.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>source</code></td>
        <td><code>str or dict</code></td>
        <td><p>The source data. .</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a source to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The ID of the source.</span>
<span class="sd">        source (str or dict): The source data. .</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_stac_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_stac_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;STAC Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_stac_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a STAC TileLayer to the map.</p>
<p>This method adds a STAC TileLayer to the map. The STAC TileLayer is
created from the specified URL, collection, item, assets, and bands, and
it is added to the map with the specified name, attribution, opacity,
visibility, and fit bounds.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://bit.ly/3VlttGm.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC
collection ID, e.g., landsat-8-c2-l2. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g.,
LC08_L2SP_047027_20201204_02_T1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID,
e.g., ["SR_B7", "SR_B5", "SR_B4"]. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>A list of band names, e.g.,
["SR_B7", "SR_B5", "SR_B4"]. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>no_data</code></td>
        <td><code>int | float</code></td>
        <td><p>The nodata value to use for the layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz",
"https://planetarycomputer.microsoft.com/api/data/v1",
"planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use for the layer. Defaults to 'STAC Layer'.</p></td>
        <td><code>&#39;STAC Layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use. Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should
be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the map should
be zoomed to the layer extent. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Arbitrary keyword arguments, including bidx, expression,
nodata, unscale, resampling, rescale, color_formula, colormap,
colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/
and https://cogeotiff.github.io/rio-tiler/colormap/. To select
a certain bands, use bidx=[1, 2, 3]. apply a rescaling to multiple
bands, use something like <code>rescale=["164,223","130,211","99,212"]</code>.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_stac_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;STAC Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a STAC TileLayer to the map.</span>

<span class="sd">    This method adds a STAC TileLayer to the map. The STAC TileLayer is</span>
<span class="sd">    created from the specified URL, collection, item, assets, and bands, and</span>
<span class="sd">    it is added to the map with the specified name, attribution, opacity,</span>
<span class="sd">    visibility, and fit bounds.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): HTTP URL to a STAC item, e.g., https://bit.ly/3VlttGm.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        collection (str, optional): The Microsoft Planetary Computer STAC</span>
<span class="sd">            collection ID, e.g., landsat-8-c2-l2. Defaults to None.</span>
<span class="sd">        item (str, optional): The Microsoft Planetary Computer STAC item ID, e.g.,</span>
<span class="sd">            LC08_L2SP_047027_20201204_02_T1. Defaults to None.</span>
<span class="sd">        assets (str | list, optional): The Microsoft Planetary Computer STAC asset ID,</span>
<span class="sd">            e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">        bands (list, optional): A list of band names, e.g.,</span>
<span class="sd">            [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">        no_data (int | float, optional): The nodata value to use for the layer.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;,</span>
<span class="sd">            &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;,</span>
<span class="sd">            &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to &#39;STAC Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        visible (bool, optional): A flag indicating whether the layer should</span>
<span class="sd">            be on by default. Defaults to True.</span>
<span class="sd">        fit_bounds (bool, optional): A flag indicating whether the map should</span>
<span class="sd">            be zoomed to the layer extent. Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">            nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">            colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">            and https://cogeotiff.github.io/rio-tiler/colormap/. To select</span>
<span class="sd">            a certain bands, use bidx=[1, 2, 3]. apply a rescaling to multiple</span>
<span class="sd">            bands, use something like `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;colormap_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">)</span>

    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_tile</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">item</span><span class="p">,</span>
        <span class="n">assets</span><span class="p">,</span>
        <span class="n">bands</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">visible</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_symbol" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">icon_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">symbol_placement</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">minzoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxzoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_symbol" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a symbol to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str</code></td>
        <td><p>The URL or local file path to the image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>The source of the symbol.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>icon_size</code></td>
        <td><code>int</code></td>
        <td><p>The size of the symbol. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>symbol_placement</code></td>
        <td><code>str</code></td>
        <td><p>The placement of the symbol. Defaults to "line".</p></td>
        <td><code>&#39;line&#39;</code></td>
      </tr>
      <tr>
        <td><code>minzoom</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>The minimum zoom level for the symbol. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxzoom</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>The maximum zoom level for the symbol. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>filter</code></td>
        <td><code>Optional[Any]</code></td>
        <td><p>A filter to apply to the symbol. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of the symbol layer. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the layer layout.
For more info, see https://maplibre.org/maplibre-style-spec/layers/#symbol</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_symbol</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">icon_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">symbol_placement</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
    <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">maxzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a symbol to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str): The URL or local file path to the image.</span>
<span class="sd">        source (str): The source of the symbol.</span>
<span class="sd">        icon_size (int, optional): The size of the symbol. Defaults to 1.</span>
<span class="sd">        symbol_placement (str, optional): The placement of the symbol. Defaults to &quot;line&quot;.</span>
<span class="sd">        minzoom (Optional[float], optional): The minimum zoom level for the symbol. Defaults to None.</span>
<span class="sd">        maxzoom (Optional[float], optional): The maximum zoom level for the symbol. Defaults to None.</span>
<span class="sd">        filter (Optional[Any], optional): A filter to apply to the symbol. Defaults to None.</span>
<span class="sd">        name (Optional[str], optional): The name of the symbol layer. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to pass to the layer layout.</span>
<span class="sd">            For more info, see https://maplibre.org/maplibre-style-spec/layers/#symbol</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;symbol_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source</span><span class="p">,</span>
        <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;icon-image&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span>
            <span class="s2">&quot;icon-size&quot;</span><span class="p">:</span> <span class="n">icon_size</span><span class="p">,</span>
            <span class="s2">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="n">symbol_placement</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">minzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;minzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minzoom</span>
    <span class="k">if</span> <span class="n">maxzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxzoom</span>
    <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>

    <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_text" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s1">&#39;5px&#39;</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="s1">&#39;5px&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_text" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds text to the map with customizable styling.</p>
<p>This method allows adding a text widget to the map with various styling options such as font size, color,
background color, and more. The text's appearance can be further customized using additional CSS properties
passed through kwargs.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>text</code></td>
        <td><code>str</code></td>
        <td><p>The text to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fontsize</code></td>
        <td><code>int</code></td>
        <td><p>The font size of the text. Defaults to 20.</p></td>
        <td><code>20</code></td>
      </tr>
      <tr>
        <td><code>fontcolor</code></td>
        <td><code>str</code></td>
        <td><p>The color of the text. Defaults to "black".</p></td>
        <td><code>&#39;black&#39;</code></td>
      </tr>
      <tr>
        <td><code>bold</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the text will be bold. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>padding</code></td>
        <td><code>str</code></td>
        <td><p>The padding around the text. Defaults to "5px".</p></td>
        <td><code>&#39;5px&#39;</code></td>
      </tr>
      <tr>
        <td><code>bg_color</code></td>
        <td><code>str</code></td>
        <td><p>The background color of the text widget. Defaults to "white".
To make the background transparent, set this to "transparent".
To make the background half transparent, set this to "rgba(255, 255, 255, 0.5)".</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>border_radius</code></td>
        <td><code>str</code></td>
        <td><p>The border radius of the text widget. Defaults to "5px".</p></td>
        <td><code>&#39;5px&#39;</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the text widget on the map. Defaults to "bottom-right".</p></td>
        <td><code>&#39;bottom-right&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional CSS properties to apply to the text widget.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="n">fontcolor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">bold</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">padding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">border_radius</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds text to the map with customizable styling.</span>

<span class="sd">    This method allows adding a text widget to the map with various styling options such as font size, color,</span>
<span class="sd">    background color, and more. The text&#39;s appearance can be further customized using additional CSS properties</span>
<span class="sd">    passed through kwargs.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The text to add to the map.</span>
<span class="sd">        fontsize (int, optional): The font size of the text. Defaults to 20.</span>
<span class="sd">        fontcolor (str, optional): The color of the text. Defaults to &quot;black&quot;.</span>
<span class="sd">        bold (bool, optional): If True, the text will be bold. Defaults to False.</span>
<span class="sd">        padding (str, optional): The padding around the text. Defaults to &quot;5px&quot;.</span>
<span class="sd">        bg_color (str, optional): The background color of the text widget. Defaults to &quot;white&quot;.</span>
<span class="sd">            To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">            To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">        border_radius (str, optional): The border radius of the text widget. Defaults to &quot;5px&quot;.</span>
<span class="sd">        position (str, optional): The position of the text widget on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        **kwargs (Any): Additional CSS properties to apply to the text widget.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">InfoBoxControl</span>

    <span class="k">if</span> <span class="n">bg_color</span> <span class="o">==</span> <span class="s2">&quot;transparent&quot;</span> <span class="ow">and</span> <span class="s2">&quot;box-shadow&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;box-shadow&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>

    <span class="n">css_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">    font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">; padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">    background-color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">; border-radius: </span><span class="si">{</span><span class="n">border_radius</span><span class="si">}</span><span class="s2">;&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">css_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">;&quot;</span>

    <span class="n">control</span> <span class="o">=</span> <span class="n">InfoBoxControl</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_tile_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_tile_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tile Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_tile_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a TileLayer to the map.</p>
<p>This method adds a TileLayer to the map. The TileLayer is created from
    the specified URL, and it is added to the map with the specified
    name, attribution, visibility, and tile size.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the tile layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to use for the layer. Defaults to '
Tile Layer'.</p></td>
        <td><code>&#39;Tile Layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use for the layer.
Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer should be visible by
default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>tile_size</code></td>
        <td><code>int</code></td>
        <td><p>The size of the tiles in the layer.
Defaults to 256.</p></td>
        <td><code>256</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>source_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional keyword arguments that are
passed to the RasterTileSource class.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the Layer class.
See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Tile Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a TileLayer to the map.</span>

<span class="sd">    This method adds a TileLayer to the map. The TileLayer is created from</span>
<span class="sd">        the specified URL, and it is added to the map with the specified</span>
<span class="sd">        name, attribution, visibility, and tile size.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the tile layer.</span>
<span class="sd">        name (str, optional): The name to use for the layer. Defaults to &#39;</span>
<span class="sd">            Tile Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">            Defaults to 256.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the RasterTileSource class.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
        <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()],</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
        <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">raster_source</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_vector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_vector" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a vector layer to the map.</p>
<p>This method adds a vector layer to the map. The vector data can be a
URL or local file path to a vector file. If a name is provided, it
is used as the key to store the layer in the layer dictionary. Otherwise,
a random name is generated.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | dict</code></td>
        <td><p>The vector data. This can be a URL or local file
path to a vector file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of the layer. If None, the type
is inferred from the GeoJSON data.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>filter</code></td>
        <td><code>dict</code></td>
        <td><p>The filter to apply to the layer. If None,
no filter is applied.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>paint</code></td>
        <td><code>dict</code></td>
        <td><p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. If None, a random name
is generated.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fit_bounds</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is visible or not.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>source_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the Layer class.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the data is not a URL or a GeoJSON dictionary.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a vector layer to the map.</span>

<span class="sd">    This method adds a vector layer to the map. The vector data can be a</span>
<span class="sd">    URL or local file path to a vector file. If a name is provided, it</span>
<span class="sd">    is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">    a random name is generated.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | dict): The vector data. This can be a URL or local file</span>
<span class="sd">            path to a vector file.</span>
<span class="sd">        layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">            is inferred from the GeoJSON data.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
        <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_video" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_video</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">,</span> <span class="n">layer_id</span><span class="o">=</span><span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_video" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a video layer to the map.</p>
<p>This method allows embedding a video into the map by specifying the video URLs and the geographical coordinates
that the video should cover. The video will be stretched and fitted into the specified coordinates.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>urls</code></td>
        <td><code>Union[str, List[str]]</code></td>
        <td><p>A single video URL or a list of video URLs. These URLs must be accessible
from the client's location.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>coordinates</code></td>
        <td><code>List[List[float]]</code></td>
        <td><p>A list of four coordinates in [longitude, latitude] format, specifying
the corners of the video. The coordinates order should be top-left, top-right, bottom-right, bottom-left.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID for the video layer. Defaults to "video".</p></td>
        <td><code>&#39;video&#39;</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The ID of an existing layer to insert the new layer before. If None, the layer
will be added on top. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_video</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">urls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span>
    <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a video layer to the map.</span>

<span class="sd">    This method allows embedding a video into the map by specifying the video URLs and the geographical coordinates</span>
<span class="sd">    that the video should cover. The video will be stretched and fitted into the specified coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        urls (Union[str, List[str]]): A single video URL or a list of video URLs. These URLs must be accessible</span>
<span class="sd">            from the client&#39;s location.</span>
<span class="sd">        coordinates (List[List[float]]): A list of four coordinates in [longitude, latitude] format, specifying</span>
<span class="sd">            the corners of the video. The coordinates order should be top-left, top-right, bottom-right, bottom-left.</span>
<span class="sd">        layer_id (str): The ID for the video layer. Defaults to &quot;video&quot;.</span>
<span class="sd">        before_id (Optional[str]): The ID of an existing layer to insert the new layer before. If None, the layer</span>
<span class="sd">            will be added on top. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
        <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="n">urls</span><span class="p">,</span>
        <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;video_source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;video_source&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.add_wms_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_wms_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;WMS Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.add_wms_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a WMS layer to the map.</p>
<p>This method adds a WMS layer to the map. The WMS  is created from
    the specified URL, and it is added to the map with the specified
    name, attribution, visibility, and tile size.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the tile layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layers</code></td>
        <td><code>str</code></td>
        <td><p>The layers to include in the WMS request.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>str</code></td>
        <td><p>The format of the tiles in the layer.</p></td>
        <td><code>&#39;image/png&#39;</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to use for the layer. Defaults to
'WMS Layer'.</p></td>
        <td><code>&#39;WMS Layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use for the layer.
Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer should be visible by
default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>tile_size</code></td>
        <td><code>int</code></td>
        <td><p>The size of the tiles in the layer.
Defaults to 256.</p></td>
        <td><code>256</code></td>
      </tr>
      <tr>
        <td><code>before_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of an existing layer before which
the new layer should be inserted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>source_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional keyword arguments that are
passed to the RasterTileSource class.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments that are passed to the Layer class.
See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">layers</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;WMS Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a WMS layer to the map.</span>

<span class="sd">    This method adds a WMS layer to the map. The WMS  is created from</span>
<span class="sd">        the specified URL, and it is added to the map with the specified</span>
<span class="sd">        name, attribution, visibility, and tile size.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the tile layer.</span>
<span class="sd">        layers (str): The layers to include in the WMS request.</span>
<span class="sd">        format (str, optional): The format of the tiles in the layer.</span>
<span class="sd">        name (str, optional): The name to use for the layer. Defaults to</span>
<span class="sd">            &#39;WMS Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">            Defaults to 256.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the RasterTileSource class.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">?service=WMS&amp;request=GetMap&amp;layers=</span><span class="si">{</span><span class="n">layers</span><span class="si">}</span><span class="s2">&amp;styles=&amp;format=</span><span class="si">{</span><span class="nb">format</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">%2F</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&amp;transparent=true&amp;version=1.1.1&amp;height=256&amp;width=256&amp;srs=EPSG%3A3857&amp;bbox=</span><span class="se">{{</span><span class="s2">bbox-epsg-3857</span><span class="se">}}</span><span class="s2">&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.find_first_symbol_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_first_symbol_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.find_first_symbol_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Find the first symbol layer in the map's current style.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Dict]</code></td>
      <td><p>The first symbol layer as a dictionary if found, otherwise None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_first_symbol_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the first symbol layer in the map&#39;s current style.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Dict]: The first symbol layer as a dictionary if found, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.find_style_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_style_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.find_style_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Searches for a style layer in the map's current style by its ID and returns it if found.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of the style layer to find.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Dict]</code></td>
      <td><p>The style layer as a dictionary if found, otherwise None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_style_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Searches for a style layer in the map&#39;s current style by its ID and returns it if found.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The ID of the style layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Dict]: The style layer as a dictionary if found, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.fit_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.fit_bounds" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adjusts the viewport of the map to fit the specified geographical bounds
    in the format of [[lon_min, lat_min], [lon_max, lat_max]] or
    [lon_min, lat_min, lon_max, lat_max].</p>
<p>This method adjusts the viewport of the map so that the specified geographical bounds
are visible in the viewport. The bounds are specified as a list of two points,
where each point is a list of two numbers representing the longitude and latitude.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bounds</code></td>
        <td><code>list</code></td>
        <td><p>A list of two points representing the geographical bounds that
        should be visible in the viewport. Each point is a list of two
        numbers representing the longitude and latitude. For example,
        [[32.958984, -5.353521],[43.50585, 5.615985]]</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fit_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adjusts the viewport of the map to fit the specified geographical bounds</span>
<span class="sd">        in the format of [[lon_min, lat_min], [lon_max, lat_max]] or</span>
<span class="sd">        [lon_min, lat_min, lon_max, lat_max].</span>

<span class="sd">    This method adjusts the viewport of the map so that the specified geographical bounds</span>
<span class="sd">    are visible in the viewport. The bounds are specified as a list of two points,</span>
<span class="sd">    where each point is a list of two numbers representing the longitude and latitude.</span>

<span class="sd">    Args:</span>
<span class="sd">        bounds (list): A list of two points representing the geographical bounds that</span>
<span class="sd">                    should be visible in the viewport. Each point is a list of two</span>
<span class="sd">                    numbers representing the longitude and latitude. For example,</span>
<span class="sd">                    [[32.958984, -5.353521],[43.50585, 5.615985]]</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bounds</span><span class="p">):</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;fitBounds&quot;</span><span class="p">,</span> <span class="n">bounds</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.fly_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fly_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">essential</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.fly_to" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Makes the map fly to a specified location.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>The longitude of the location to fly to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>The latitude of the location to fly to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>The zoom level to use when flying
to the location. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>speed</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>The speed of the fly animation.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>essential</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the flyTo animation is considered
essential and not affected by prefers-reduced-motion. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the flyTo function.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fly_to</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">speed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">essential</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes the map fly to a specified location.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the location to fly to.</span>
<span class="sd">        lat (float): The latitude of the location to fly to.</span>
<span class="sd">        zoom (Optional[float], optional): The zoom level to use when flying</span>
<span class="sd">            to the location. Defaults to None.</span>
<span class="sd">        speed (Optional[float], optional): The speed of the fly animation.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        essential (bool, optional): Whether the flyTo animation is considered</span>
<span class="sd">            essential and not affected by prefers-reduced-motion. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the flyTo function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zoom</span>
    <span class="k">if</span> <span class="n">speed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed</span>
    <span class="k">if</span> <span class="n">essential</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;essential&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">essential</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;flyTo&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.get_style" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.get_style" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Get the style of the map.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict</code></td>
      <td><p>The style of the map.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_style</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the style of the map.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict: The style of the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">)</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">style</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.get_style_layers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_style_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">return_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.get_style_layers" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Get the names of the basemap layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>The names of the basemap layers.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_style_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">return_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the names of the basemap layers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: The names of the basemap layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">return_ids</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">sorted</span><span class="p">:</span>
                <span class="n">ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">ids</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layers</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.jump_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">jump_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.jump_to" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Jumps the map to a specified location.</p>
<p>This function jumps the map to the specified location with the specified options.
Additional keyword arguments can be provided to control the jump. For more information,
see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#jumpto</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>options</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Additional options to control the jump. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to control the jump.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">jump_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Jumps the map to a specified location.</span>

<span class="sd">    This function jumps the map to the specified location with the specified options.</span>
<span class="sd">    Additional keyword arguments can be provided to control the jump. For more information,</span>
<span class="sd">    see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#jumpto</span>

<span class="sd">    Args:</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the jump. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the jump.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;jumpTo&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.layer_interact" class="doc doc-heading">
<code class="highlight language-python"><span class="n">layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.layer_interact" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create a layer widget for changing the visibility and opacity of a layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipywidgets.Widget</code></td>
      <td><p>The layer widget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipywidgets.Widget: The layer widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

    <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">layer_names</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">],</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">],</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
        <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

    <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
        <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
        <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hbox</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.open_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">open_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.open_geojson" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Creates a file uploader widget to upload a GeoJSON file. When a file is
uploaded, it is written to a temporary file and added to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the add_geojson method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>widgets.FileUpload</code></td>
      <td><p>The file uploader widget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">open_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;widgets.FileUpload&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a file uploader widget to upload a GeoJSON file. When a file is</span>
<span class="sd">    uploaded, it is written to a temporary file and added to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.FileUpload: The file uploader widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

    <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
        <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span>  <span class="c1"># Accept GeoJSON files</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Only single file upload</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Open GeoJSON&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
        <span class="n">temp_file</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">uploader</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.pan_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pan_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lnglat</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.pan_to" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Pans the map to a specified location.</p>
<p>This function pans the map to the specified longitude and latitude coordinates.
Additional options and keyword arguments can be provided to control the panning.
For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#panto</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lnglat</code></td>
        <td><code>List[float, float]</code></td>
        <td><p>The longitude and latitude coordinates to pan to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>options</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Additional options to control the panning. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to control the panning.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pan_to</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lnglat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pans the map to a specified location.</span>

<span class="sd">    This function pans the map to the specified longitude and latitude coordinates.</span>
<span class="sd">    Additional options and keyword arguments can be provided to control the panning.</span>
<span class="sd">    For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#panto</span>

<span class="sd">    Args:</span>
<span class="sd">        lnglat (List[float, float]): The longitude and latitude coordinates to pan to.</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the panning. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the panning.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;panTo&quot;</span><span class="p">,</span> <span class="n">lnglat</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.remove_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.remove_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes a layer from the map.</p>
<p>This method removes a layer from the map using the layer's name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer to remove.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes a layer from the map.</span>

<span class="sd">    This method removes a layer from the map using the layer&#39;s name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer to remove.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeLayer&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.rotate_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rotate_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bearing</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.rotate_to" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Rotate the map to a specified bearing.</p>
<p>This function rotates the map to a specified bearing. The bearing is specified in degrees
counter-clockwise from true north. If the bearing is not specified, the map will rotate to
true north. Additional options and keyword arguments can be provided to control the rotation.
For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#rotateto</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bearing</code></td>
        <td><code>float</code></td>
        <td><p>The bearing to rotate to, in degrees counter-clockwise from true north.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>options</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Additional options to control the rotation. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to control the rotation.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">rotate_to</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotate the map to a specified bearing.</span>

<span class="sd">    This function rotates the map to a specified bearing. The bearing is specified in degrees</span>
<span class="sd">    counter-clockwise from true north. If the bearing is not specified, the map will rotate to</span>
<span class="sd">    true north. Additional options and keyword arguments can be provided to control the rotation.</span>
<span class="sd">    For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#rotateto</span>

<span class="sd">    Args:</span>
<span class="sd">        bearing (float): The bearing to rotate to, in degrees counter-clockwise from true north.</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the rotation. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the rotation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;rotateTo&quot;</span><span class="p">,</span> <span class="n">bearing</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.save_draw_features" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_draw_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.save_draw_features" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Saves the drawn features to a file.</p>
<p>This method saves all features created with the drawing control to a
specified file in GeoJSON format. If there are no features to save, the
file will not be created.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filepath</code></td>
        <td><code>str</code></td>
        <td><p>The path to the file where the GeoJSON data will be saved.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to be passed to json.dump for custom serialization.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the feature collection is empty.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_draw_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the drawn features to a file.</span>

<span class="sd">    This method saves all features created with the drawing control to a</span>
<span class="sd">    specified file in GeoJSON format. If there are no features to save, the</span>
<span class="sd">    file will not be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepath (str): The path to the file where the GeoJSON data will be saved.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to be passed to json.dump for custom serialization.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the feature collection is empty.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">json</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are no features to save.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_center" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_center" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets the center of the map.</p>
<p>This method sets the center of the map to the specified longitude and latitude.
If a zoom level is provided, it also sets the zoom level of the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>The longitude of the center of the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>The latitude of the center of the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>The zoom level of the map. If None, the zoom
level is not changed.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the center of the map.</span>

<span class="sd">    This method sets the center of the map to the specified longitude and latitude.</span>
<span class="sd">    If a zoom level is provided, it also sets the zoom level of the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center of the map.</span>
<span class="sd">        lat (float): The latitude of the center of the map.</span>
<span class="sd">        zoom (int, optional): The zoom level of the map. If None, the zoom</span>
<span class="sd">            level is not changed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setCenter&quot;</span><span class="p">,</span> <span class="n">center</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_color" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_color" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set the color of a layer.</p>
<p>This method sets the color of the specified layer to the specified value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>color</code></td>
        <td><code>str</code></td>
        <td><p>The color value to set.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the color of a layer.</span>

<span class="sd">    This method sets the color of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        color (str): The color value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">color</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_layout_property" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_layout_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_layout_property" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set the layout property of a layer.</p>
<p>This method sets the layout property of the specified layer to the specified value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>prop</code></td>
        <td><code>str</code></td>
        <td><p>The layout property to set.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>The value to set.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_layout_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the layout property of a layer.</span>

<span class="sd">    This method sets the layout property of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        prop (str): The layout property to set.</span>
<span class="sd">        value (Any): The value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_opacity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_opacity" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set the opacity of a layer.</p>
<p>This method sets the opacity of the specified layer to the specified value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity value to set.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the opacity of a layer.</span>

<span class="sd">    This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        opacity (float): The opacity value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_paint_property" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_paint_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_paint_property" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set the opacity of a layer.</p>
<p>This method sets the opacity of the specified layer to the specified value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity value to set.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_paint_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the opacity of a layer.</span>

<span class="sd">    This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        opacity (float): The opacity value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">prop</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_pitch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_pitch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_pitch" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets the pitch of the map.</p>
<p>This function sets the pitch of the map to the specified value. The pitch is the
angle of the camera measured in degrees where 0 is looking straight down, and 60 is
looking towards the horizon. Additional keyword arguments can be provided to control
the pitch. For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#setpitch</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pitch</code></td>
        <td><code>float</code></td>
        <td><p>The pitch value to set.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to control the pitch.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_pitch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the pitch of the map.</span>

<span class="sd">    This function sets the pitch of the map to the specified value. The pitch is the</span>
<span class="sd">    angle of the camera measured in degrees where 0 is looking straight down, and 60 is</span>
<span class="sd">    looking towards the horizon. Additional keyword arguments can be provided to control</span>
<span class="sd">    the pitch. For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#setpitch</span>

<span class="sd">    Args:</span>
<span class="sd">        pitch (float): The pitch value to set.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the pitch.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setPitch&quot;</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_visibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_visibility" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set the visibility of a layer.</p>
<p>This method sets the visibility of the specified layer to the specified value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>The visibility value to set.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the visibility of a layer.</span>

<span class="sd">    This method sets the visibility of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        visible (bool): The visibility value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">visible</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.set_zoom" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.set_zoom" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets the zoom level of the map.</p>
<p>This method sets the zoom level of the map to the specified value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>The zoom level of the map.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the zoom level of the map.</span>

<span class="sd">    This method sets the zoom level of the map to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (int): The zoom level of the map.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.show" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.show" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Displays the map.</p>

        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Displays the map.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Container</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.style_layer_interact" class="doc doc-heading">
<code class="highlight language-python"><span class="n">style_layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.style_layer_interact" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create a layer widget for changing the visibility and opacity of a style layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>The is of the layer.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipywidgets.Widget</code></td>
      <td><p>The layer widget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">style_layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a style layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The is of the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipywidgets.Widget: The layer widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

    <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">layer_ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_ids</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
    <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
        <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">visibility</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_rgb</span><span class="p">(</span><span class="n">rgba_string</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">re</span>

        <span class="c1"># Extracting the RGB values using regex</span>
        <span class="n">rgb_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">rgba_string</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">rgb_tuple</span>

    <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
        <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

    <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
        <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>

        <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">visibility</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">opacity</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">color</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">color</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span>
            <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span> <span class="k">if</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;none&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
            <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span>

    <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hbox</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.to_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Awesome Map&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">replace_key</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">remove_port</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">preview</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.to_html" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Render the map to an HTML page.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The output HTML file. If None, the HTML content
is returned as a string. Defaults</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>The title of the HTML page. Defaults to 'My Awesome Map'.</p></td>
        <td><code>&#39;My Awesome Map&#39;</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>str</code></td>
        <td><p>The width of the map. Defaults to '100%'.</p></td>
        <td><code>&#39;100%&#39;</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>The height of the map. Defaults to '100%'.</p></td>
        <td><code>&#39;100%&#39;</code></td>
      </tr>
      <tr>
        <td><code>replace_key</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to replace the API key in the HTML.
If True, the API key is replaced with the public API key.
The API key is read from the environment variable <code>MAPTILER_KEY</code>.
The public API key is read from the environment variable <code>MAPTILER_KEY_PUBLIC</code>.
Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>remove_port</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to remove the port number from the HTML.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>preview</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to preview the HTML file in a web browser.
Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overwrite the output file if it already exists.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments that are passed to the
<code>maplibre.ipywidget.MapWidget.to_html()</code> method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The HTML content of the map.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Awesome Map&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
    <span class="n">replace_key</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">remove_port</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Render the map to an HTML page.</span>

<span class="sd">    Args:</span>
<span class="sd">        output (str, optional): The output HTML file. If None, the HTML content</span>
<span class="sd">            is returned as a string. Defaults</span>
<span class="sd">        title (str, optional): The title of the HTML page. Defaults to &#39;My Awesome Map&#39;.</span>
<span class="sd">        width (str, optional): The width of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">        height (str, optional): The height of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">        replace_key (bool, optional): Whether to replace the API key in the HTML.</span>
<span class="sd">            If True, the API key is replaced with the public API key.</span>
<span class="sd">            The API key is read from the environment variable `MAPTILER_KEY`.</span>
<span class="sd">            The public API key is read from the environment variable `MAPTILER_KEY_PUBLIC`.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        remove_port (bool, optional): Whether to remove the port number from the HTML.</span>
<span class="sd">        preview (bool, optional): Whether to preview the HTML file in a web browser.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite the output file if it already exists.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">            `maplibre.ipywidget.MapWidget.to_html()` method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The HTML content of the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">height</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;style&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">style_before</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="n">style_after</span> <span class="o">=</span> <span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;html, body {height: 100%; margin: 0; padding: 0;} #pymaplibregl {width: 100%; height: &quot;&quot;&quot;</span>
            <span class="o">+</span> <span class="n">height</span>
            <span class="o">+</span> <span class="s2">&quot;&quot;&quot;;}</span><span class="se">\n</span><span class="s2">&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">style_before</span><span class="p">,</span> <span class="n">style_after</span><span class="p">)</span>

        <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;width: 100%; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="n">div_after</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

        <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">replace_key</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPTILER_REPLACE_KEY&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">key_before</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
        <span class="n">key_after</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY_PUBLIC&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key_after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">key_before</span><span class="p">,</span> <span class="n">key_after</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">remove_port</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">remove_port_from_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPLIBRE_OUTPUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">glob</span>

            <span class="n">num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="s2">&quot;*.html&quot;</span><span class="p">)))</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">.html&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">preview</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">webbrowser</span>

            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">html</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.to_streamlit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_streamlit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.to_streamlit" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Convert the map to a Streamlit component.</p>
<p>This function converts the map to a Streamlit component by encoding the
HTML representation of the map as base64 and embedding it in an iframe.
The width, height, and scrolling parameters control the appearance of
the iframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>width</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The width of the iframe. If None, the width
will be determined by Streamlit.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The height of the iframe. Default is 600.</p></td>
        <td><code>600</code></td>
      </tr>
      <tr>
        <td><code>scrolling</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Whether the iframe should be scrollable.
Default is False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional arguments to pass to the Streamlit iframe
function.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The Streamlit component.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>Exception</code></td>
        <td><p>If there is an error in creating the Streamlit component.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_streamlit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
    <span class="n">scrolling</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the map to a Streamlit component.</span>

<span class="sd">    This function converts the map to a Streamlit component by encoding the</span>
<span class="sd">    HTML representation of the map as base64 and embedding it in an iframe.</span>
<span class="sd">    The width, height, and scrolling parameters control the appearance of</span>
<span class="sd">    the iframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (Optional[int]): The width of the iframe. If None, the width</span>
<span class="sd">            will be determined by Streamlit.</span>
<span class="sd">        height (Optional[int]): The height of the iframe. Default is 600.</span>
<span class="sd">        scrolling (Optional[bool]): Whether the iframe should be scrollable.</span>
<span class="sd">            Default is False.</span>
<span class="sd">        **kwargs (Any): Additional arguments to pass to the Streamlit iframe</span>
<span class="sd">            function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The Streamlit component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If there is an error in creating the Streamlit component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>  <span class="c1"># pylint: disable=E0401</span>
        <span class="kn">import</span> <span class="nn">base64</span>

        <span class="n">raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">raw_html</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">iframe</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;data:text/html;base64,</span><span class="si">{</span><span class="n">raw_html</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="leafmap.maplibregl.Map.zoom_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zoom_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.Map.zoom_to" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Zooms the map to a specified zoom level.</p>
<p>This function zooms the map to the specified zoom level. Additional options and keyword
arguments can be provided to control the zoom. For more information, see
https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#zoomto</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>zoom</code></td>
        <td><code>float</code></td>
        <td><p>The zoom level to zoom to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>options</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Additional options to control the zoom. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to control the zoom.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Zooms the map to a specified zoom level.</span>

<span class="sd">    This function zooms the map to the specified zoom level. Additional options and keyword</span>
<span class="sd">    arguments can be provided to control the zoom. For more information, see</span>
<span class="sd">    https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#zoomto</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (float): The zoom level to zoom to.</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the zoom. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the zoom.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;zoomTo&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="leafmap.maplibregl.construct_maptiler_style" class="doc doc-heading">
<code class="highlight language-python"><span class="n">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.construct_maptiler_style" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Constructs a URL for a MapTiler style with an optional API key.</p>
<p>This function generates a URL for accessing a specific MapTiler map style. If an API key is not provided,
it attempts to retrieve one using a predefined method. If the request to MapTiler fails, it defaults to
a "liberty" style.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>style</code></td>
        <td><code>str</code></td>
        <td><p>The name of the MapTiler style to be accessed. It can be one of the following:
aquarelle, backdrop, basic, bright, dataviz, landscape, ocean, openstreetmap, outdoor,
satellite, streets, toner, topo, winter, etc.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>An optional API key for accessing MapTiler services. If None, the function
attempts to retrieve the API key using a predefined method. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The URL for the requested MapTiler style. If the request fails, returns a URL for the "liberty" style.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>requests.exceptions.RequestException</code></td>
        <td><p>If the request to the MapTiler API fails.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs a URL for a MapTiler style with an optional API key.</span>

<span class="sd">    This function generates a URL for accessing a specific MapTiler map style. If an API key is not provided,</span>
<span class="sd">    it attempts to retrieve one using a predefined method. If the request to MapTiler fails, it defaults to</span>
<span class="sd">    a &quot;liberty&quot; style.</span>

<span class="sd">    Args:</span>
<span class="sd">        style (str): The name of the MapTiler style to be accessed. It can be one of the following:</span>
<span class="sd">            aquarelle, backdrop, basic, bright, dataviz, landscape, ocean, openstreetmap, outdoor,</span>
<span class="sd">            satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">        api_key (Optional[str]): An optional API key for accessing MapTiler services. If None, the function</span>
<span class="sd">            attempts to retrieve the API key using a predefined method. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The URL for the requested MapTiler style. If the request fails, returns a URL for the &quot;liberty&quot; style.</span>

<span class="sd">    Raises:</span>
<span class="sd">        requests.exceptions.RequestException: If the request to the MapTiler API fails.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/maps/</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">/style.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Failed to retrieve the MapTiler style. Defaulting to OpenFreeMap &#39;liberty&#39; style.&quot;</span>
        <span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.openfreemap.org/styles/liberty&quot;</span>

    <span class="k">return</span> <span class="n">url</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="leafmap.maplibregl.edit_gps_trace" class="doc doc-heading">
<code class="highlight language-python"><span class="n">edit_gps_trace</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">colormap</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="n">fig_width</span><span class="o">=</span><span class="s1">&#39;1550px&#39;</span><span class="p">,</span> <span class="n">fig_height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.edit_gps_trace" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Edits a GPS trace on the map and allows for annotation and export.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The path to the GPS trace CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>m</code></td>
        <td><code>Any</code></td>
        <td><p>The map object containing the GPS trace.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>colormap</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>The colormap for the GPS trace annotations.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the GPS trace layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fig_width</code></td>
        <td><code>str</code></td>
        <td><p>The width of the figure. Defaults to "1550px".</p></td>
        <td><code>&#39;1550px&#39;</code></td>
      </tr>
      <tr>
        <td><code>fig_height</code></td>
        <td><code>str</code></td>
        <td><p>The height of the figure. Defaults to "400px".</p></td>
        <td><code>&#39;400px&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The main widget containing the map and the editing interface.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">edit_gps_trace</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">m</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">colormap</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">fig_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1550px&quot;</span><span class="p">,</span>
    <span class="n">fig_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;400px&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Edits a GPS trace on the map and allows for annotation and export.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The path to the GPS trace CSV file.</span>
<span class="sd">        m (Any): The map object containing the GPS trace.</span>
<span class="sd">        colormap (Dict[str, str]): The colormap for the GPS trace annotations.</span>
<span class="sd">        layer_name (str): The name of the GPS trace layer.</span>
<span class="sd">        fig_width (str, optional): The width of the figure. Defaults to &quot;1550px&quot;.</span>
<span class="sd">        fig_height (str, optional): The height of the figure. Defaults to &quot;400px&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The main widget containing the map and the editing interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">bqplot</span> <span class="kn">import</span> <span class="n">LinearScale</span><span class="p">,</span> <span class="n">Scatter</span><span class="p">,</span> <span class="n">Figure</span><span class="p">,</span> <span class="n">PanZoom</span>
    <span class="kn">import</span> <span class="nn">bqplot</span> <span class="k">as</span> <span class="nn">bq</span>
    <span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">VBox</span><span class="p">,</span> <span class="n">Button</span>
    <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

    <span class="n">output_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;_annotated.csv&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">output_geojson</span> <span class="o">=</span> <span class="n">output_csv</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="n">fig_margin</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;bottom&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
    <span class="n">x_sc</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>
    <span class="n">y_sc</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>

    <span class="n">features</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">columns</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">default_feature</span> <span class="o">=</span> <span class="s2">&quot;max_signal_strength&quot;</span>
    <span class="n">default_index</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">default_feature</span><span class="p">)</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">features</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">default_index</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Select feature&quot;</span>
    <span class="p">)</span>

    <span class="n">column</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">value</span>
    <span class="n">category_column</span> <span class="o">=</span> <span class="s2">&quot;annotation&quot;</span>  <span class="c1"># Replace with your categorical column name</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>

    <span class="c1"># Create scatter plots for each annotation category with the appropriate colors and labels</span>
    <span class="n">scatters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">cat</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">cat</span> <span class="o">!=</span> <span class="s2">&quot;selected&quot;</span>
        <span class="p">):</span>  <span class="c1"># Exclude &#39;selected&#39; from data points (only for highlighting selection)</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">category_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
            <span class="n">scatter</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span>
                <span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_sc</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_sc</span><span class="p">},</span>
                <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">color</span><span class="p">],</span>
                <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                <span class="n">stroke</span><span class="o">=</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span>
                <span class="n">unselected_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
                <span class="n">selected_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span>
                <span class="n">default_size</span><span class="o">=</span><span class="mi">48</span><span class="p">,</span>  <span class="c1"># Set a smaller default marker size</span>
                <span class="n">display_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="n">cat</span><span class="p">],</span>  <span class="c1"># Add the category label for the legend</span>
            <span class="p">)</span>
            <span class="n">scatters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scatter</span><span class="p">)</span>

    <span class="c1"># Create the figure and add the scatter plots</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span>
        <span class="n">marks</span><span class="o">=</span><span class="n">scatters</span><span class="p">,</span>
        <span class="n">fig_margin</span><span class="o">=</span><span class="n">fig_margin</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">fig_width</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">fig_height</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">),</span>
        <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">column</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">legend_location</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span>

    <span class="c1"># Add LassoSelector interaction</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">bq</span><span class="o">.</span><span class="n">interacts</span><span class="o">.</span><span class="n">LassoSelector</span><span class="p">(</span><span class="n">x_scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">y_scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">scatters</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>

    <span class="c1"># Add PanZoom interaction for zooming and panning</span>
    <span class="n">panzoom</span> <span class="o">=</span> <span class="n">PanZoom</span><span class="p">(</span><span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">x_sc</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y_sc</span><span class="p">]})</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">panzoom</span>  <span class="c1"># Set PanZoom as the interaction to enable zooming initially</span>
    <span class="p">)</span>

    <span class="c1"># Callback function to handle selected points with bounds check</span>
    <span class="k">def</span> <span class="nf">on_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="c1"># output.clear_output()</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">selected_idx</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
                <span class="n">selected_indices</span> <span class="o">=</span> <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span>
                <span class="k">if</span> <span class="n">selected_indices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">selected_indices</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selected_indices</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                    <span class="p">]</span>  <span class="c1"># Ensure integer indices</span>
                    <span class="n">selected_x</span> <span class="o">=</span> <span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">selected_indices</span><span class="p">]</span>
                    <span class="n">selected_y</span> <span class="o">=</span> <span class="n">scatter</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">selected_indices</span><span class="p">]</span>
                    <span class="n">selected_idx</span> <span class="o">+=</span> <span class="n">selected_x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">selected_idx</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">selected_idx</span><span class="p">)))</span>
            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">selected_idx</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
            <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="c1"># Register the callback for each scatter plot</span>
    <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
        <span class="n">scatter</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_select</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span><span class="p">])</span>

    <span class="c1"># Programmatic selection function based on common x values</span>
    <span class="k">def</span> <span class="nf">select_points_by_common_x</span><span class="p">(</span><span class="n">x_values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select points based on a common list of x values across all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
            <span class="c1"># Find indices of points in the scatter that match the given x values</span>
            <span class="n">selected_indices</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">x_val</span> <span class="ow">in</span> <span class="n">x_values</span>
            <span class="p">]</span>
            <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">selected_indices</span>  <span class="c1"># Highlight points at the specified indices</span>
            <span class="p">)</span>

    <span class="c1"># Function to clear the lasso selection</span>
    <span class="k">def</span> <span class="nf">clear_selection</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
            <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Clear selected points</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Re-enable the LassoSelector</span>

        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
        <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="c1"># Button to clear selection and switch between interactions</span>
    <span class="n">clear_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Clear Selection&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>
    <span class="n">clear_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">clear_selection</span><span class="p">)</span>

    <span class="c1"># Toggle between LassoSelector and PanZoom interactions</span>
    <span class="k">def</span> <span class="nf">toggle_interaction</span><span class="p">(</span><span class="n">button</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">==</span> <span class="n">selector</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">panzoom</span>  <span class="c1"># Switch to PanZoom for zooming and panning</span>
            <span class="n">button</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Enable Lasso&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Switch back to LassoSelector</span>
            <span class="n">button</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Enable Zoom/Pan&quot;</span>

    <span class="n">toggle_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Enable Zoom/Pan&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>
    <span class="n">toggle_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">toggle_interaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">feature_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>

                <span class="n">fig</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">),</span>
                    <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">feature</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                <span class="p">]</span>

                <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
                <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">[</span><span class="n">cat</span><span class="p">]]</span> <span class="o">*</span> <span class="n">categories</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
                <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">feature</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">feature_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw_change</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">features</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
            <span class="n">gdf_draw</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
            <span class="n">points_within_polygons</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">sjoin</span><span class="p">(</span>
                <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gdf_draw</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="s2">&quot;within&quot;</span>
            <span class="p">)</span>
            <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="n">points_within_polygons</span><span class="p">[</span><span class="s2">&quot;index_right&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">(),</span> <span class="s2">&quot;category&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">selected</span> <span class="o">=</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                    <span class="n">points_within_polygons</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;selected&quot;</span>
                <span class="p">]</span>
                <span class="n">sel_idx</span> <span class="o">=</span> <span class="n">selected</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">select_points_by_common_x</span><span class="p">(</span><span class="n">sel_idx</span><span class="p">)</span>
            <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;index_right&quot;</span> <span class="ow">in</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">points_within_polygons</span> <span class="o">=</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;index_right&quot;</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span> <span class="o">=</span> <span class="n">points_within_polygons</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
                <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Clear selected points</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Re-enable the LassoSelector</span>

            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
            <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">draw_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;draw_features_selected&quot;</span><span class="p">)</span>

    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([])</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;doorstep&quot;</span><span class="p">,</span> <span class="s2">&quot;indoor&quot;</span><span class="p">,</span> <span class="s2">&quot;outdoor&quot;</span><span class="p">,</span> <span class="s2">&quot;parked&quot;</span><span class="p">]</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;annotation&quot;</span><span class="p">)</span>
    <span class="n">button_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;97px&quot;</span><span class="p">)</span>
    <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">export</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Export&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">feature</span><span class="p">,</span> <span class="n">dropdown</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span> <span class="n">output</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">on_save_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>
        <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
        <span class="n">categories</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
            <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
            <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="n">mask</span><span class="p">]</span>
            <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">[</span><span class="n">cat</span><span class="p">]]</span> <span class="o">*</span> <span class="n">categories</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
            <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Clear selected points</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Re-enable the LassoSelector</span>

        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
        <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="n">save</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_save_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_export_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">])</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">output_geojson</span><span class="p">)</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">export</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_export_click</span><span class="p">)</span>

    <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span><span class="n">fig</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">clear_button</span><span class="p">,</span> <span class="n">toggle_button</span><span class="p">])])</span>

    <span class="n">left_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">cols</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">m</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span>  <span class="c1"># padding for consistent spacing</span>
    <span class="p">)</span>
    <span class="n">right_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">widget</span><span class="p">],</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
    <span class="p">)</span>
    <span class="n">row1</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">left_col_layout</span><span class="p">,</span> <span class="n">right_col_layout</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">row2</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">plot_widget</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">main_widget</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="leafmap.maplibregl.maptiler_3d_style" class="doc doc-heading">
<code class="highlight language-python"><span class="n">maptiler_3d_style</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;satellite&#39;</span><span class="p">,</span> <span class="n">exaggeration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">tile_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">hillshade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s1">&#39;MAPTILER_KEY&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#leafmap.maplibregl.maptiler_3d_style" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the 3D terrain style for the map.</p>
<p>This function generates a style dictionary for the map that includes 3D terrain features.
The terrain exaggeration and API key can be specified. If the API key is not provided,
it will be retrieved using the specified token.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>style</code></td>
        <td><code>str</code></td>
        <td><p>The name of the MapTiler style to be accessed. It can be one of the following:
aquarelle, backdrop, basic, bright, dataviz, hillshade, landscape, ocean, openstreetmap, outdoor,
satellite, streets, toner, topo, winter, etc.</p></td>
        <td><code>&#39;satellite&#39;</code></td>
      </tr>
      <tr>
        <td><code>exaggeration</code></td>
        <td><code>float</code></td>
        <td><p>The terrain exaggeration. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>tile_size</code></td>
        <td><code>int</code></td>
        <td><p>The size of the tiles. Defaults to 512.</p></td>
        <td><code>512</code></td>
      </tr>
      <tr>
        <td><code>tile_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of the tiles. It can be one of the following:
webp, png, jpg. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_zoom</code></td>
        <td><code>int</code></td>
        <td><p>The maximum zoom level. Defaults to 24.</p></td>
        <td><code>24</code></td>
      </tr>
      <tr>
        <td><code>hillshade</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to include hillshade. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>token</code></td>
        <td><code>str</code></td>
        <td><p>The token to use to retrieve the API key. Defaults to "MAPTILER_KEY".</p></td>
        <td><code>&#39;MAPTILER_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The API key. If not provided, it will be retrieved using the token.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The style dictionary for the map.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the API key is not provided and cannot be retrieved using the token.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">maptiler_3d_style</span><span class="p">(</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
    <span class="n">exaggeration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
    <span class="n">tile_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_zoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
    <span class="n">hillshade</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the 3D terrain style for the map.</span>

<span class="sd">    This function generates a style dictionary for the map that includes 3D terrain features.</span>
<span class="sd">    The terrain exaggeration and API key can be specified. If the API key is not provided,</span>
<span class="sd">    it will be retrieved using the specified token.</span>

<span class="sd">    Args:</span>
<span class="sd">        style (str): The name of the MapTiler style to be accessed. It can be one of the following:</span>
<span class="sd">            aquarelle, backdrop, basic, bright, dataviz, hillshade, landscape, ocean, openstreetmap, outdoor,</span>
<span class="sd">            satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">        exaggeration (float, optional): The terrain exaggeration. Defaults to 1.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles. Defaults to 512.</span>
<span class="sd">        tile_type (str, optional): The type of the tiles. It can be one of the following:</span>
<span class="sd">            webp, png, jpg. Defaults to None.</span>
<span class="sd">        max_zoom (int, optional): The maximum zoom level. Defaults to 24.</span>
<span class="sd">        hillshade (bool, optional): Whether to include hillshade. Defaults to True.</span>
<span class="sd">        token (str, optional): The token to use to retrieve the API key. Defaults to &quot;MAPTILER_KEY&quot;.</span>
<span class="sd">        api_key (Optional[str], optional): The API key. If not provided, it will be retrieved using the token.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: The style dictionary for the map.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the API key is not provided and cannot be retrieved using the token.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An API key is required to use the 3D terrain feature.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;dark-matter&quot;</span>

    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;terrain&quot;</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;satellite&quot;</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">tile_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">image_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;aquarelle&quot;</span><span class="p">:</span> <span class="s2">&quot;webp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;backdrop&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;basic&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;basic-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bright&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bright-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dataviz&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hybrid&quot;</span><span class="p">:</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;landscape&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ocean&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;openstreetmap&quot;</span><span class="p">:</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;outdoor&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;outdoor-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;satellite&quot;</span><span class="p">:</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;toner&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;toner-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;topo&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;topo-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;winter&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;winter-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">image_types</span><span class="p">:</span>
            <span class="n">tile_type</span> <span class="o">=</span> <span class="n">image_types</span><span class="p">[</span><span class="n">style</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile_type</span> <span class="o">=</span> <span class="s2">&quot;png&quot;</span>

    <span class="n">layers</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">hillshade</span><span class="p">:</span>
        <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">,</span>
                <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;visibility&quot;</span><span class="p">:</span> <span class="s2">&quot;visible&quot;</span><span class="p">},</span>
                <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hillshade-shadow-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#473B24&quot;</span><span class="p">},</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;ocean&quot;</span><span class="p">:</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;terrainSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/ocean-rgb/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/ocean-rgb/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;terrainSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">sources</span><span class="p">[</span><span class="n">style</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;https://api.maptiler.com/maps/&quot;</span>
                <span class="o">+</span> <span class="n">style</span>
                <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.&quot;</span>
                <span class="o">+</span> <span class="n">tile_type</span>
                <span class="o">+</span> <span class="s2">&quot;?key=&quot;</span>
                <span class="o">+</span> <span class="n">api_key</span>
            <span class="p">],</span>
            <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="s2">&quot;&amp;copy; MapTiler&quot;</span><span class="p">,</span>
            <span class="s2">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="n">max_zoom</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="n">sources</span><span class="p">,</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="n">layers</span><span class="p">,</span>
        <span class="s2">&quot;terrain&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;terrainSource&quot;</span><span class="p">,</span> <span class="s2">&quot;exaggeration&quot;</span><span class="p">:</span> <span class="n">exaggeration</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">style</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-05-07T00:45:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-05-07</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-05-07T00:45:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-05-07</span>
  </span>

    
    
    
  </aside>


  




                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 - 2024 Qiusheng Wu
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>